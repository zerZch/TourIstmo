<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil de Empresa - Get Panamá</title>
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/perfil-empresa.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <!-- Navbar Flotante -->
    <nav class="floating-navbar" id="navbar">
        <!-- Menú Izquierdo -->
        <div class="menu-left">
            <a href="#destino" class="nav-link">Destino</a>
            <a href="#planes" class="nav-link">Planes</a>
            <a href="#perfil" class="nav-link">Perfil</a>
        </div>
        <!-- Logo Central -->
        <div class="menu-center">
            <a href="#" class="menu-title">
                <img class="logo-icon" src="img/logo.svg" alt="">
                <span>TourIstmo</span>
            </a>
        </div>
        <!-- Menú Derecho -->
        <div class="menu-right">
            <a href="#login" class="cta-button-nav">Login</a>
        </div>
        <!-- Menú móvil hamburguesa -->
        <div class="mobile-menu-toggle" id="mobileToggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>

    <div class="container">
        <!-- Sidebar Izquierdo -->
        <aside class="sidebar">
            <!-- Información de la Empresa -->
            <div class="user-info">
                <div class="user-avatar">
                    <img src="img/getpanama.png" alt="Get Panamá">
                </div>
                <h1 class="user-name">Get Panamá</h1>
                <p class="user-username">@get.panama</p>
            </div>
            <!-- Información General -->
            <div class="general-info">
                <h3>Información General</h3>
                <div class="info-grid">
                    <div class="info-section phone">
                        <div class="info-section-title">Teléfono</div>
                        <div class="info-section-value">+507 6123-4567</div>
                    </div>
                    <div class="info-section email">
                        <div class="info-section-title">Email</div>
                        <a href="mailto:info@panamaget.com" class="info-section-value">info@panamaget.com</a>
                    </div>
                    <div class="info-section schedule">
                        <div class="info-section-title">Facebook</div>
                        <div class="info-section-value">@getpanama</div>
                    </div>
                    <div class="info-section clients">
                        <div class="info-section-title">Instagram</div>
                        <div class="info-section-value">@get.panama</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Contenido Principal -->
        <main class="main-content">
            <!-- Header con imagen de portada -->
            <header class="profile-header">
                <div class="cover-image">
                    <img src="img/banner.avif" alt="Get Panamá">
                    <div class="cover-overlay">
                        <h2 class="cover-title">Get Panamá</h2>
                        <button class="explore-btn" onclick="window.open('https://www.panamaget.com', '_blank')">Conócenos</button>
                    </div>
                </div>
            </header>

            <!-- Navegación de Planes -->
            <nav class="destinations-nav">
                <h2>Planes Activos</h2>
                <div class="destinations-tabs">
                    <button class="tab-btn active" data-category="todos">Todos</button>
                    <button class="tab-btn" data-category="naturaleza">Naturaleza</button>
                    <button class="tab-btn" data-category="urbano">Urbano</button>
                    <button class="tab-btn" data-category="cultural">Cultural</button>
                    <button class="tab-btn" data-category="tropical">Tropical</button>
                </div>
            </nav>

            <!-- Grid de Planes -->
            <section class="destinations-grid">
                <!-- El contenido será generado dinámicamente por JavaScript -->
            </section>

            <!-- Agregar mensaje de no resultados -->
            <div id="noResults" class="no-results" style="display: none;">
                <p><i data-lucide="search-x"></i> No se encontraron planes para esta categoría.</p>
            </div>
        </main>

        <!-- Sidebar Derecho -->
        <aside class="right-sidebar">
            <!-- Sobre Nosotros -->
            <div class="user-details">
                <h3>Sobre Nosotros</h3>
                <p class="user-bio">
                    Ser reconocidos como el principal operador de turismo de aventura en Panamá, ofreciendo experiencias únicas que conecten a los viajeros con la naturaleza, la cultura y la autenticidad de los destinos panameños.
                </p>
                <div class="action-buttons">
                    <a href="Formularioplanes.html" class="btn-primary">Registra un plan</a>
                </div>
            </div>
        </aside>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-grid">
                <!-- Logo y descripción -->
                <div class="footer-brand">
                    <a href="#" class="footer-logo">
                        <img class="logo-icon" src="img/logowhite.png" alt="">
                        <span class="footer-logo-text">TourIstmo</span>
                    </a>
                    <p class="footer-description">
                        Explora, comparte y disfruta de los mejores destinos turísticos de Panamá.
                        Tu aventura comienza aquí.
                    </p>
                </div>
                <!-- Navegación principal -->
                <div class="footer-section">
                    <h4>TourIstmo</h4>
                    <ul class="footer-links">
                        <li><a href="index.jsp">Inicio</a></li>
                        <li><a href="formulario.jsp">Agregar Destino</a></li>
                        <li><a href="planes.jsp">Planes Turísticos</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">Reservar</a></li>
                    </ul>
                </div>
                <!-- Colaboración y Soporte -->
                <div class="footer-section">
                    <h4>Colabora</h4>
                    <ul class="footer-links">
                        <li><a href="#">Únete al equipo</a></li>
                        <li><a href="#">Publica tus planes</a></li>
                    </ul>
                    <h4 style="margin-top: var(--spacing-lg);">Soporte</h4>
                    <ul class="footer-links">
                        <li><a href="#">Términos y Condiciones</a></li>
                        <li><a href="#">Privacidad</a></li>
                        <li><a href="#">Ayuda</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p class="footer-copyright">
                    © 2025 Touristmo. Todos los derechos reservados.
                </p>
            </div>
        </div>
    </footer>

    <script>
        // ============================================
        // DATOS DE EJEMPLO - PLANES DE EMPRESA
        // ============================================
        const planesEmpresa = [
            {
                id: 1,
                nombre: "Archipiélago de Las Perlas Full Day",
                descripcion: "Excursión completa al archipiélago de Las Perlas con transporte incluido, almuerzo y actividades acuáticas en aguas cristalinas.",
                imagen: "https://images.unsplash.com/photo-1544551763-46a013bb70d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                ubicacion: "San Blas, Panamá",
                precio: "$85",
                rating: "4.8",
                tipo: "Tropical",
                horario: "8:00 AM - 6:00 PM",
                duracion: "1 día",
                empresa: "Get Panamá"
            },
            {
                id: 2,
                nombre: "Canal de Panamá Experience",
                descripcion: "Tour histórico por las esclusas de Miraflores con centro de visitantes y observación del funcionamiento del canal.",
                imagen: "https://images.unsplash.com/photo-1645932700624-5075c8d2df58?auto=format&fit=crop&w=400&q=80",
                ubicacion: "Miraflores, Panamá",
                precio: "$45",
                rating: "4.9",
                tipo: "Cultural",
                horario: "8:00 AM - 5:00 PM",
                duracion: "4 horas",
                empresa: "Get Panamá"
            },
            {
                id: 3,
                nombre: "Gamboa Rainforest Adventure",
                descripcion: "Aventura en la selva tropical de Gamboa con senderismo, observación de aves y visita al teleférico del dosel.",
                imagen: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&fit=crop&w=400&q=80",
                ubicacion: "Gamboa, Panamá",
                precio: "$95",
                rating: "4.7",
                tipo: "Naturaleza",
                horario: "7:00 AM - 4:00 PM",
                duracion: "1 día",
                empresa: "Get Panamá"
            },
            {
                id: 4,
                nombre: "City Tour Casco Viejo",
                descripcion: "Recorrido por el centro histórico de Panamá, declarado Patrimonio de la Humanidad, con guía especializado.",
                imagen: "https://images.unsplash.com/photo-1540610410855-b4c8877b761c?auto=format&fit=crop&w=400&q=80",
                ubicacion: "Casco Viejo, Panamá",
                precio: "$35",
                rating: "4.6",
                tipo: "Cultural",
                horario: "9:00 AM - 1:00 PM",
                duracion: "4 horas",
                empresa: "Get Panamá"
            },
            {
                id: 5,
                nombre: "Playa Blanca Beach Day",
                descripcion: "Día de playa en Playa Blanca con transporte, almuerzo y actividades acuáticas incluidas.",
                imagen: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=400&q=80",
                ubicacion: "Playa Blanca, Colón",
                precio: "$65",
                rating: "4.5",
                tipo: "Tropical",
                horario: "8:00 AM - 5:00 PM",
                duracion: "1 día",
                empresa: "Get Panamá"
            },
            {
                id: 6,
                nombre: "Metro Tour Panamá",
                descripcion: "Tour urbano utilizando el metro de Panamá para conocer los puntos más importantes de la ciudad moderna.",
                imagen: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=400&q=80",
                ubicacion: "Ciudad de Panamá",
                precio: "$25",
                rating: "4.3",
                tipo: "Urbano",
                horario: "10:00 AM - 2:00 PM",
                duracion: "4 horas",
                empresa: "Get Panamá"
            },
            {
                id: 7,
                nombre: "Biomuseo & Amador",
                descripcion: "Visita al Biomuseo diseñado por Frank Gehry y recorrido por la Calzada de Amador con vistas panorámicas.",
                imagen: "https://images.unsplash.com/photo-1566073771259-6a8506099945?auto=format&fit=crop&w=400&q=80",
                ubicacion: "Amador, Panamá",
                precio: "$40",
                rating: "4.7",
                tipo: "Cultural",
                horario: "9:00 AM - 3:00 PM",
                duracion: "6 horas",
                empresa: "Get Panamá"
            },
            {
                id: 8,
                nombre: "Parque Metropolitano Hiking",
                descripcion: "Caminata guiada por el único parque natural urbano de América con observación de flora y fauna local.",
                imagen: "https://images.unsplash.com/photo-1518837695005-2083093ee35b?auto=format&fit=crop&w=400&q=80",
                ubicacion: "Parque Metropolitano",
                precio: "$30",
                rating: "4.4",
                tipo: "Naturaleza",
                horario: "6:00 AM - 10:00 AM",
                duracion: "4 horas",
                empresa: "Get Panamá"
            },
            {
                id: 9,
                nombre: "Cinta Costera Night Walk",
                descripcion: "Caminata nocturna por la Cinta Costera con vistas del skyline iluminado y la bahía de Panamá.",
                imagen: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=400&q=80",
                ubicacion: "Cinta Costera",
                precio: "$20",
                rating: "4.2",
                tipo: "Urbano",
                horario: "7:00 PM - 9:00 PM",
                duracion: "2 horas",
                empresa: "Get Panamá"
            },
            {
                id: 10,
                nombre: "Isla Taboga Adventure",
                descripcion: "Excursión a la Isla de las Flores con ferry, almuerzo, playa y recorrido histórico por el pueblo colonial.",
                imagen: "https://images.unsplash.com/photo-1544551763-46a013bb70d5?auto=format&fit=crop&w=400&q=80",
                ubicacion: "Isla Taboga",
                precio: "$55",
                rating: "4.6",
                tipo: "Tropical",
                horario: "8:00 AM - 4:00 PM",
                duracion: "1 día",
                empresa: "Get Panamá"
            }
        ];

        // ============================================
        // FUNCIONES DE UTILIDAD
        // ============================================
        
        // Función para configurar manejo de errores de imágenes
        function setupImageErrorHandling() {
            document.querySelectorAll('img').forEach(img => {
                if (!img.hasAttribute('data-error-handled')) {
                    img.setAttribute('data-error-handled', 'true');
                    img.onerror = function() {
                        const w = this.width || 400;
                        const h = this.height || 300;
                        const txt = this.alt.charAt(0).toUpperCase() || '?';
                        this.src = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${w}' height='${h}'%3E%3Crect width='${w}' height='${h}' fill='%23E0E6ED'/%3E%3Ctext x='50%25' y='50%25' font-size='48' fill='%237F8C8D' text-anchor='middle' alignment-baseline='middle'%3E${txt}%3C/text%3E%3C/svg%3E`;
                    };
                }
            });
        }

        // Función para obtener iconos según el tipo (usando Lucide)
        function getTypeIcon(tipo) {
            const typeIcons = {
                'naturaleza': 'tree-pine',
                'urbano': 'building-2', 
                'cultural': 'landmark',
                'tropical': 'palm-tree'
            };
            return typeIcons[tipo.toLowerCase()] || 'map-pin';
        }

        // ============================================
        // FUNCIÓN PRINCIPAL DE GENERACIÓN DE CARDS
        // ============================================
        
        // Función principal generateCardHTML (única función para generar cards)
        function generateCardHTML(plan) {
            const url = `plan.html?id=${plan.id}`;
            const priceText = plan.precio ? plan.precio : 'Gratis';
            const typeIcon = getTypeIcon(plan.tipo);
            
            return `
                <a href="${url}" class="destination-card" data-category="${plan.tipo.toLowerCase()}">
                    <div class="destination-image">
                        <img src="${plan.imagen}" alt="${plan.nombre}" class="destination-img">
                    </div>
                    <div class="destination-info">
                        <div class="horizontal-info">
                            <h4 class="destination-name">${plan.nombre}</h4>
                        </div>
                        <p class="destination-location">
                            <span class="location-icon"><i data-lucide="map-pin"></i></span>
                            ${plan.ubicacion}
                        </p>
                        <p class="destination-type ${plan.tipo.toLowerCase()}">${plan.tipo}</p>
                        <div class="destination-meta">
                            <span class="rating">
                                <span class="star-icon"><i data-lucide="star" fill="currentColor"></i></span>
                                ${plan.rating || '4.5'}
                            </span>
                            <span class="price">${priceText}</span>
                        </div>
                    </div>
                </a>
            `;
        }

        // ============================================
        // FUNCIÓN DE CARGA DE CONTENIDO
        // ============================================
        
        // Función para cargar planes
        function loadPlans() {
            const grid = document.querySelector('.destinations-grid');
            if (!grid) {
                console.log('No se encontró .destinations-grid');
                return;
            }

            // Limpiar grid existente
            grid.innerHTML = '';

            // Generar cartas usando generateCardHTML
            planesEmpresa.forEach(plan => {
                const cardHTML = generateCardHTML(plan);
                grid.innerHTML += cardHTML;
            });

            // Configurar manejo de errores de imágenes
            setupImageErrorHandling();
            
            // Reinicializar iconos de Lucide
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }

            console.log('Planes cargados:', planesEmpresa.length);
        }

        // ============================================
        // FUNCIÓN DE INTERACCIÓN
        // ============================================
        
        // Función para alternar el estado de guardado/favorito
        function toggleSave(button) {
            const isSaved = button.dataset.saved === 'true';
            button.dataset.saved = !isSaved;
            
            // Cambiar el icono visual
            const heartIcon = button.querySelector('.heart-icon i, i');
            if (!isSaved) {
                button.classList.add('saved');
                if (heartIcon) {
                    heartIcon.classList.add('filled');
                }
            } else {
                button.classList.remove('saved');
                if (heartIcon) {
                    heartIcon.classList.remove('filled');
                }
            }

            // Reinicializar iconos
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }

            console.log('Toggled save state:', !isSaved);
        }

        // ============================================
        // FILTROS
        // ============================================
        
        // Función para filtrar planes por tipo
        function filterPlans(category) {
            const planCards = document.querySelectorAll('.destination-card');
            const noResults = document.getElementById('noResults');
            let visibleCards = 0;

            console.log('Filtrando planes por categoría:', category);

            planCards.forEach((card, index) => {
                const cardCategory = card.dataset.category;
                
                // Resetear animación
                card.style.animation = 'none';
                card.style.animationDelay = '0s';

                let shouldShow = false;
                
                if (category === 'todos') {
                    shouldShow = true;
                } else {
                    shouldShow = cardCategory === category;
                }

                if (shouldShow) {
                    card.classList.remove('hidden');
                    card.style.display = 'block';
                    // Animación escalonada
                    setTimeout(() => {
                        card.style.animationDelay = `${visibleCards * 0.1}s`;
                        card.style.animation = 'fadeInUp 0.6s ease forwards';
                    }, 10);
                    visibleCards++;
                } else {
                    card.classList.add('hidden');
                    card.style.display = 'none';
                }
            });

            // Manejo de mensaje "no hay resultados"
            if (noResults) {
                noResults.style.display = visibleCards === 0 ? 'block' : 'none';
            }

            console.log('Planes visibles:', visibleCards);
        }

        // ============================================
        // INICIALIZACIÓN DE FILTROS
        // ============================================
        
        // Función para inicializar los filtros de planes
        function initializePlanFilters() {
            const tabButtons = document.querySelectorAll('.destinations-tabs .tab-btn');
            if (tabButtons.length === 0) {
                console.log('No se encontraron botones de filtro de planes');
                return;
            }

            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remover clase active de todos los botones
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    // Añadir clase active al botón clickeado
                    this.classList.add('active');
                    
                    // Obtener categoría del data-category
                    const category = this.dataset.category;
                    filterPlans(category);
                });
            });
        }

        // ============================================
        // INICIALIZACIÓN PRINCIPAL
        // ============================================
        
        // Función principal de inicialización
        function initializeAll() {
            try {
                // Cargar contenido
                loadPlans();

                // Inicializar filtros
                initializePlanFilters();

                // Filtrar por defecto después de que se haya cargado el contenido
                setTimeout(() => {
                    filterPlans('todos');
                }, 100);

                console.log('Aplicación inicializada correctamente');
            } catch (error) {
                console.error('Error al inicializar la aplicación:', error);
            }
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================
        
        // Event listener para cuando se carga el DOM
        document.addEventListener('DOMContentLoaded', function() {
            try {
                // Inicializar Lucide Icons
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }

                // Inicializar toda la aplicación
                initializeAll();
            } catch (error) {
                console.error('Error en DOMContentLoaded:', error);
            }
        });

        // Event listener global para botones de favorito
        document.addEventListener('click', function(e) {
            // Manejar clicks en botones de guardado
            if (e.target.closest('.save-btn')) {
                const button = e.target.closest('.save-btn');
                toggleSave(button);
                return;
            }
        });
    </script>
</body>
</html>