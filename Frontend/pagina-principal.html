<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>tourIstmo | Inicio</title>
  <link rel="stylesheet" href="css/global.css">
  <link rel="stylesheet" href="css/paginaprincipal.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Modak&family=Pacifico&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Quicksand:wght@300..700&display=swap" rel="stylesheet">

</head>

<body>
<!-- Navbar Flotante -->
 <nav class="floating-navbar" id="navbar">
    <!-- Menú Izquierdo -->
    <div class="menu-left">
        <a href="#destino" class="nav-link">Destino</a>
        <a href="#planes" class="nav-link">Planes</a>
        <a href="#perfil" class="nav-link">Perfil</a>
    </div>

    <!-- Logo Central -->
    <div class="menu-center">
        <a href="#" class="menu-title">
            <img class="logo-icon"  src="img/logo.svg">
            <span>TourIstmo</span>
        </a>
    </div>

    <!-- Menú Derecho -->
    <div class="menu-right">
        <!-- Barra de Búsqueda -->
        <div class="search-container">
            <div class="search-input-wrapper">
                <span class="search-icon" data-icon="search"></span>
                <input type="text" class="search-input" placeholder="Buscar destinos..." />
                <button class="search-clear" data-icon="x" style="display: none;"></button>
            </div>
        </div>
        
        <!-- Redes Sociales -->
        <div class="social-container">
            <a href="" class="social-link" data-icon="facebook" aria-label="Facebook"></a>
            <a href="https://www.instagram.com" class="social-link" data-icon="instagram" aria-label="Instagram"></a>
            <button class="power-off" data-icon="circle-power" style="display: none;"></button>
        </div>
    </div>

    <!-- Menú móvil hamburguesa -->
    <div class="mobile-menu-toggle" id="mobileToggle">
        <span></span>
        <span></span>
        <span></span>
    </div>
</nav>

<!-- ===== Hero Section ===== -->
<section class="hero-section">
  <div class="hero-content">
    <h1 class="hero-title">Explora las maravillas de Panamá</h1>
    <p class="hero-subtitle">Un lugar donde la naturaleza y la aventura se unen</p>
    <a href="#destinos" class="hero-cta">
      <span>Iniciar Sesión</span>
    </a>
  </div>
  
  <div class="hero-controls">
    <button class="hero-control" onclick="previousHero()">‹</button>
    <button class="hero-control play" onclick="togglePlay()">⏸</button>
  </div>
</section>

<!-- ===== Main Content ===== -->
<main class="main-content">
  <!-- ===== Destinos destacados ===== -->
  <section class="container" id="destinos">
    <h2 class="section-title">Top 6 destinos mejor valorados</h2>

    <div class="carousel-wrapper">
      <button class="car-btn left" data-target="destCarousel">‹</button>
      <div class="carousel" id="destCarousel">
        <!-- Las cartas se cargarán aquí dinámicamente -->
      </div>
      <button class="car-btn right" data-target="destCarousel">›</button>
    </div>

    <div style="text-align:center;">
      <a href="destino-pagina.jsp" class="btn-primary">Ver todos los destinos</a>
    </div>
  </section>

  <!-- ===== Planes destacados ===== -->
  <section class="container" style="margin-top: var(--spacing-3xl);">
    <h2 class="section-title">Top 6 planes mejor valorados</h2>

    <div class="carousel-wrapper">
      <button class="car-btn left" data-target="planCarousel">‹</button>
      <div class="carousel" id="planCarousel">
        <!-- Las cartas se cargarán aquí dinámicamente -->
      </div>
      <button class="car-btn right" data-target="planCarousel">›</button>
    </div>

    <div style="text-align:center;">
      <a href="planes-pagina.jsp" class="btn-primary">Ver todos los planes</a>
    </div>
  </section>

    <!-- ===== SECCIÓN DE NOTICIAS ===== -->
    <section class="news-section">
        <div class="container">
            <!-- Encabezado de la sección -->
            <div class="news-header">
                <h2 class="news-title">Últimas Noticias</h2>
                <p class="news-subtitle">Mantente informado sobre las últimas novedades del sector turístico</p>
            </div>

            <!-- Grid de noticias -->
            <div class="news-grid">
                <!-- Noticia 1 - Artículo -->
                <article class="news-card news-card--featured">
                    <div class="news-card__image">
                        <img src="https://images.unsplash.com/photo-1488646953014-85cb44e25828?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1200&q=80" alt="Destinos turísticos sostenibles">
                        <div class="news-card__badge">
                            <span class="badge badge--article">Artículo</span>
                        </div>
                    </div>
                    <div class="news-card__content">
                        <div class="news-card__meta">
                            <span class="news-meta__date">15 Jul 2025</span>
                            <span class="news-meta__category">Turismo Sostenible</span>
                        </div>
                        <h3 class="news-card__title">Costa Rica lidera iniciativas de turismo sostenible en Centroamérica</h3>
                        <p class="news-card__excerpt">El país implementa nuevas políticas para promover el ecoturismo y reducir el impacto ambiental del sector, estableciendo estándares regionales.</p>
                        <a href="https://es.travel2latam.com/news-98827-costa-rica-se-consolida-como-referente-mundial-en-turismo-sostenible" class="news-card__link" target="_blank" rel="noopener noreferrer">
                            Leer más
                            <svg class="link-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M7 17L17 7M17 7H7M17 7V17"/>
                            </svg>
                        </a>
                    </div>
                </article>

                <!-- Noticia 2 - Video -->
                <article class="news-card news-card--video">
                    <div class="news-card__image">
                        <img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1200&q=80" alt="Playas de Panamá">
                        <div class="news-card__badge">
                            <span class="badge badge--video">Video</span>
                        </div>
                        <div class="video-overlay">
                            <svg class="play-icon" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                        </div>
                    </div>
                    <div class="news-card__content">
                        <div class="news-card__meta">
                            <span class="news-meta__date">12 Jul 2025</span>
                            <span class="news-meta__category">Promoción Turística</span>
                        </div>
                        <h3 class="news-card__title">Panamá presenta nueva campaña para atraer turistas internacionales</h3>
                        <p class="news-card__excerpt">Documental promocional destaca la diversidad natural y cultural del país, con enfoque en experiencias auténticas y aventura.</p>
                        <a href="https://www.youtube.com/watch?v=Dt6VEIN_o6o" class="news-card__link" target="_blank" rel="noopener noreferrer">
                            Ver video
                            <svg class="link-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M7 17L17 7M17 7H7M17 7V17"/>
                            </svg>
                        </a>
                    </div>
                </article>

                <!-- Noticia 3 - Artículo -->
                <article class="news-card">
                    <div class="news-card__image">
                        <img src="https://imascono.com/wp-content/uploads/2024/01/Turismo-tecnologia_01.jpg" alt="Turismo digital">
                        <div class="news-card__badge">
                            <span class="badge badge--article">Artículo</span>
                        </div>
                    </div>
                    <div class="news-card__content">
                        <div class="news-card__meta">
                            <span class="news-meta__date">10 Jul 2025</span>
                            <span class="news-meta__category">Innovación</span>
                        </div>
                        <h3 class="news-card__title">La transformación digital revoluciona la experiencia turística</h3>
                        <p class="news-card__excerpt">Nuevas tecnologías como realidad aumentada y aplicaciones móviles están cambiando la forma en que los viajeros exploran destinos.</p>
                        <a href="https://www.ostelea.com/actualidad/blog-turismo/turismo-digital" class="news-card__link" target="_blank" rel="noopener noreferrer">
                            Leer más
                            <svg class="link-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M7 17L17 7M17 7H7M17 7V17"/>
                            </svg>
                        </a>
                    </div>
                </article>
            </div>
        </div>
    </section>
</main>


<!-- ===== Footer ===== -->
<footer class="footer">
  <div class="footer-container">
      <div class="footer-grid">
          <!-- Logo y descripción -->
          <div class="footer-brand">
              <a href="#" class="footer-logo">
                  <img class="logo-icon"  src="img/logowhite.png" alt="">
                  <span class="footer-logo-text">TourIstmo</span>
              </a>
              <p class="footer-description">
                  Explora, comparte y disfruta de los mejores destinos turísticos de Panamá. 
                  Tu aventura comienza aquí.
              </p>
          </div>

          <!-- Navegación principal -->
          <div class="footer-section">
              <h4>TourIstmo</h4>
              <ul class="footer-links">
                  <li><a href="index.jsp">Inicio</a></li>
                  <li><a href="formulario.jsp">Agregar Destino</a></li>
                  <li><a href="planes.jsp">Planes Turísticos</a></li>
                  <li><a href="#">Blog</a></li>
                  <li><a href="#">Reservar</a></li>
              </ul>
          </div>

          <!-- Colaboración y Soporte -->
          <div class="footer-section">
              <h4>Colabora</h4>
              <ul class="footer-links">
                  <li><a href="#">Únete al equipo</a></li>
                  <li><a href="#">Publica tus planes</a></li>
              </ul>
              
              <h4 style="margin-top: var(--spacing-lg);">Soporte</h4>
              <ul class="footer-links">
                  <li><a href="#">Términos y Condiciones</a></li>
                  <li><a href="#">Privacidad</a></li>
                  <li><a href="#">Ayuda</a></li>
              </ul>
          </div>

              <div class="footer-app">
                  <h4>Descarga la App</h4>
                  <a href="#" class="app-download">
                      <img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="Descargar en App Store">
                  </a>
              </div>
          </div>
      </div>

      <div class="footer-bottom">
          <p class="footer-copyright">
              © 2025 Touristmo. Todos los derechos reservados.
          </p>
      </div>
  </div>
</footer>


<!-- ===== Script ===== -->
<script src="login.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    // ===============================
    // VARIABLES GLOBALES
    // ===============================
    
    // Navbar elements
    const navbar = document.getElementById('navbar');
    const mobileToggle = document.getElementById('mobileToggle');
    const menuLeft = document.querySelector('.menu-left');
    const menuRight = document.querySelector('.menu-right');
    const navLinks = document.querySelectorAll('.nav-link');

    // Control variables
    let lastScrollTop = 0;
    let scrollTimer = null;
    let currentHeroIndex = 0;
    let isPlaying = true;
    let heroInterval;

    // ===============================
    // HERO SLIDER DATA
    // ===============================
    const heroImages = [
        'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&h=1080&fit=crop',
        'https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=1920&h=1080&fit=crop',
        'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=1920&h=1080&fit=crop',
        'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1920&h=1080&fit=crop'
    ];

    const heroTitles = [
        'Explora las maravillas de Panamá',
        'Descubre paraísos tropicales',
        'Aventúrate en la selva',
        'Relájate en playas pristinas'
    ];

    const heroSubtitles = [
        'Un lugar donde la naturaleza y la aventura se unen',
        'Donde el mar Caribe te espera',
        'Experimenta la biodiversidad única',
        'Disfruta del sol y la arena blanca'
    ];

    // ===============================
    // MOCK DATA FOR CAROUSEL
    // ===============================
    const mockDestinations = [
        {
            id: 1,
            nombre: 'Casco Viejo',
            provincia: 'Panamá',
            tipo: 'Histórico',
            precio: 25,
            rating: 4.9,
            imagen: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=200&fit=crop'
        },
        {
            id: 2,
            nombre: 'Bocas del Toro',
            provincia: 'Bocas del Toro',
            tipo: 'Playa',
            precio: null,
            rating: 4.8,
            imagen: 'https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=400&h=200&fit=crop'
        },
        {
            id: 3,
            nombre: 'Canal de Panamá',
            provincia: 'Panamá',
            tipo: 'Ingeniería',
            precio: 35,
            rating: 4.7,
            imagen: 'https://images.unsplash.com/photo-1641176716788-d4816a66dc6d?w=400&h=200&fit=crop'
        },
        {
            id: 4,
            nombre: 'San Blas',
            provincia: 'Guna Yala',
            tipo: 'Paradisíaco',
            precio: null,
            rating: 4.9,
            imagen: 'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=400&h=200&fit=crop'
        },
        {
            id: 5,
            nombre: 'Volcán Barú',
            provincia: 'Chiriquí',
            tipo: 'Aventura',
            precio: 45,
            rating: 4.6,
            imagen: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&h=200&fit=crop'
        },
        {
            id: 6,
            nombre: 'El Valle de Antón',
            provincia: 'Coclé',
            tipo: 'Natural',
            precio: 30,
            rating: 4.5,
            imagen: 'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=400&h=200&fit=crop'
        }
    ];

    const mockPlans = [
        {
            id: 1,
            nombre: 'Tour Bocas del Toro',
            provincia: 'Bocas del Toro',
            tipo: 'Aventura',
            precio: 85,
            rating: 4.7,
            imagen: 'https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=400&h=200&fit=crop'
        },
        {
            id: 2,
            nombre: 'Expedición Darién',
            provincia: 'Darién',
            tipo: 'Exploración',
            precio: null,
            rating: 4.8,
            imagen: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&h=200&fit=crop'
        },
        {
            id: 3,
            nombre: 'City Tour Panamá',
            provincia: 'Panamá',
            tipo: 'Cultural',
            precio: 65,
            rating: 4.6,
            imagen: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=200&fit=crop'
        },
        {
            id: 4,
            nombre: 'Snorkel San Blas',
            provincia: 'Guna Yala',
            tipo: 'Acuático',
            precio: 120,
            rating: 4.9,
            imagen: 'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=400&h=200&fit=crop'
        },
        {
            id: 5,
            nombre: 'Senderismo Chiriquí',
            provincia: 'Chiriquí',
            tipo: 'Aventura',
            precio: null,
            rating: 4.4,
            imagen: 'https://images.unsplash.com/photo-1551632811-561732d1e306?w=400&h=200&fit=crop'
        },
        {
            id: 6,
            nombre: 'Relax en Coclé',
            provincia: 'Coclé',
            tipo: 'Relajación',
            precio: 75,
            rating: 4.3,
            imagen: 'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=400&h=200&fit=crop'
        }
    ];

    // ===============================
    // ICONOS SVG
    // ===============================
    const icons = {
        target: '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>',
        mapPin: '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>',
        star: '<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/></svg>',
        heart: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>',
        heartFilled: '<svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>',
        search: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>',
        x: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>',
        facebook: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>',
        instagram: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="m16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg>',
        CirclePower: '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 7v4"/><path d="M7.998 9.003a5 5 0 1 0 8-.005"/><circle cx="12" cy="12" r="10"/></svg>'
    };


    // ====================================================
    // FUNCION DE INICIALIZACION DE ICONOS DESDE EL HTML
    // ===================================================

    function initializeIcons() {
    const elements = document.querySelectorAll('[data-icon]');
    console.log('Elementos con data-icon encontrados:', elements.length);
    
    elements.forEach(element => {
        const iconName = element.getAttribute('data-icon');
        console.log('Procesando icono:', iconName);
        if (icons[iconName]) {
            element.innerHTML = icons[iconName];
        }
    });
    }

    // =====================
    // FUNCION DE BUSQUEDA
    // =====================

    function handleSearch(searchTerm) {
    if (searchTerm && searchTerm.trim() !== '') {
        // Redirigir a Google con el término de búsqueda
        const googleSearchUrl = `https://www.google.com/search?q=${encodeURIComponent(searchTerm)}`;
        window.open(googleSearchUrl, '_blank');
    }
}

    // ===============================
    // FUNCIONES UTILITARIAS
    // ===============================
    function detectDevice() {
        const isMobile = window.innerWidth <= 768;
        const isTablet = window.innerWidth > 768 && window.innerWidth <= 1024;
        if (navbar) {
            navbar.classList.toggle('mobile-device', isMobile);
            navbar.classList.toggle('tablet-device', isTablet);
        }
    }

    function toggleMobileMenu() {
        if (mobileToggle && menuLeft && menuRight) {
            mobileToggle.classList.toggle('active');
            menuLeft.classList.toggle('mobile-open');
            menuRight.classList.toggle('mobile-open');
            document.body.style.overflow = mobileToggle.classList.contains('active') ? 'hidden' : '';
        }
    }

    function handleScroll() {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        
        if (navbar) {
            navbar.classList.toggle('scrolled', scrollTop > 100);

            if (window.innerWidth <= 768) {
                navbar.style.transform = (scrollTop > lastScrollTop && scrollTop > 200)
                    ? 'translateX(-50%) translateY(-100px)'
                    : 'translateX(-50%) translateY(0)';
                navbar.style.opacity = (scrollTop > lastScrollTop && scrollTop > 200) ? '0.8' : '1';
            }
        }

        lastScrollTop = scrollTop;
    }

    function smoothScrollTo(targetId) {
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
            const offsetTop = targetElement.offsetTop - 120;
            window.scrollTo({ top: offsetTop, behavior: 'smooth' });
        }
    }

    function updateActiveLink() {
        const scrollPosition = window.scrollY + 150;
        navLinks.forEach(link => {
            const targetId = link.getAttribute('href');
            if (targetId && targetId.startsWith('#')) {
                const section = document.querySelector(targetId);
                if (section) {
                    const top = section.offsetTop;
                    const bottom = top + section.offsetHeight;
                    if (scrollPosition >= top && scrollPosition < bottom) {
                        navLinks.forEach(l => l.classList.remove('active'));
                        link.classList.add('active');
                    }
                }
            }
        });
    }

    function animateNavbarEntrance() {
        if (navbar) {
            navbar.style.opacity = '0';
            navbar.style.transform = 'translateX(-50%) translateY(-50px) scale(0.9)';
            setTimeout(() => {
                navbar.style.transition = 'all 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
                navbar.style.opacity = '1';
                navbar.style.transform = 'translateX(-50%) translateY(0) scale(1)';
            }, 200);
        }
    }

    function addHoverEffects() {
        if (navbar) {
            navbar.querySelectorAll('a, button').forEach(el => {
                el.addEventListener('mouseenter', () => {
                    el.style.transform += ' scale(1.05)';
                });
                el.addEventListener('mouseleave', () => {
                    el.style.transform = el.style.transform.replace(' scale(1.05)', '');
                });
            });
        }
    }

    function setupIntersectionObserver() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-in');
                }
            });
        }, { threshold: 0.1, rootMargin: '-50px 0px' });

        document.querySelectorAll('.demo-section').forEach(section => {
            observer.observe(section);
        });
    }

    function setupAccessibility() {
        navLinks.forEach(link => {
            link.addEventListener('keydown', e => {
                if (['Enter', ' '].includes(e.key)) {
                    e.preventDefault();
                    link.click();
                }
            });
        });

        document.addEventListener('keydown', e => {
            if (e.key === 'Tab') {
                document.body.classList.add('keyboard-navigation');
            }
        });

        document.addEventListener('mousedown', () => {
            document.body.classList.remove('keyboard-navigation');
        });
    }

    // Función para manejar la funcionalidad de búsqueda
    function initSearchFunctionality() {
    const searchInput = document.querySelector('.search-input');
    const searchClear = document.querySelector('.search-clear');
    const searchIcon = document.querySelector('.search-icon');
    
    if (searchInput && searchClear) {
        // Mostrar/ocultar botón de limpiar
        searchInput.addEventListener('input', function() {
            if (this.value.length > 0) {
                searchClear.style.display = 'flex';
            } else {
                searchClear.style.display = 'none';
            }
        });
        
        // Limpiar búsqueda
        searchClear.addEventListener('click', function() {
            searchInput.value = '';
            searchInput.focus();
            this.style.display = 'none';
        });
        
        // Manejar búsqueda con Enter
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                handleSearch(this.value);
            }
        });

        // Manejar clic en el icono de búsqueda
        if (searchIcon) {
            searchIcon.style.cursor = 'pointer'; // Cambiar cursor para indicar que es clickeable
            searchIcon.addEventListener('click', function() {
                handleSearch(searchInput.value);
            });
        }
    }
}

    // ===============================
    // HERO SLIDER FUNCTIONS
    // ===============================
    function updateHero(index) {
        const heroSection = document.querySelector('.hero-section');
        const heroTitle = document.querySelector('.hero-title');
        const heroSubtitle = document.querySelector('.hero-subtitle');
        
        if (heroSection && heroTitle && heroSubtitle) {
            heroSection.style.backgroundImage = `linear-gradient(135deg, rgba(40, 57, 81, 0.4), rgba(88, 134, 132, 0.3)), url('${heroImages[index]}')`;
            heroTitle.textContent = heroTitles[index];
            heroSubtitle.textContent = heroSubtitles[index];
        }
    }

    function nextHero() {
        currentHeroIndex = (currentHeroIndex + 1) % heroImages.length;
        updateHero(currentHeroIndex);
    }

    function previousHero() {
        currentHeroIndex = currentHeroIndex === 0 ? heroImages.length - 1 : currentHeroIndex - 1;
        updateHero(currentHeroIndex);
    }

    function togglePlay() {
        const playBtn = document.querySelector('.hero-control.play');
        
        if (playBtn) {
            if (isPlaying) {
                clearInterval(heroInterval);
                playBtn.textContent = '▶';
                isPlaying = false;
            } else {
                heroInterval = setInterval(nextHero, 5000);
                playBtn.textContent = '⏸';
                isPlaying = true;
            }
        }
    }

    function startHeroSlideshow() {
        updateHero(0);
        heroInterval = setInterval(nextHero, 5000);
    }

    // ===============================
    // CAROUSEL FUNCTIONS
    // ===============================
    function generateCardHTML(item, isPlan = false) {
        const url = isPlan ? `plan.html?id=${item.id}` : `destino.html?id=${item.id}`;
        const priceText = item.precio ? `$${item.precio}` : 'Gratis';
        const typeIcon = isPlan ? icons.target : icons.mapPin;
        
        return `
            <a href="${url}" class="destination-card">
                <div class="destination-image">
                    <img src="${item.imagen}" alt="${item.nombre}">
                </div>
                <div class="destination-info">
                    <div class="horizontal-info">
                        <h4>${item.nombre}</h4>
                        <button class="save-btn save-btn-overlay" onclick="event.preventDefault(); toggleSave(this)" data-saved="false">
                            <span class="heart-icon">${icons.heart}</span>
                        </button>
                    </div>
                    <p class="destination-location">
                        <span class="location-icon">${typeIcon}</span>
                        ${item.provincia}
                    </p>
                    <p class="destination-type ${item.tipo.toLowerCase()}">${item.tipo}</p>
                    <div class="destination-meta">
                        <span class="rating">
                            <span class="star-icon">${icons.star}</span>
                            ${item.rating || '4.5'}
                        </span>
                        <span class="price">${priceText}</span>
                    </div>
                </div>
            </a>
        `;
    }

    async function loadCarousel(containerId, apiEndpoint, mockData, isPlan = false) {
        const container = document.getElementById(containerId);
        if (!container) {
            console.error('Container not found:', containerId);
            return;
        }
        
        try {
            console.log('Trying to load from API:', apiEndpoint);
            const response = await fetch(apiEndpoint);
            if (!response.ok) throw new Error('API not available');
            
            const data = await response.json();
            container.innerHTML = data.map(item => generateCardHTML(item, isPlan)).join('');
            console.log('Data loaded from API for', containerId);
        } catch (error) {
            console.warn('Using mock data for', containerId, '- Error:', error.message);
            container.innerHTML = mockData.map(item => generateCardHTML(item, isPlan)).join('');
        }
    }

    // ===============================
    // GLOBAL FUNCTIONS (for onclick handlers)
    // ===============================
    window.toggleSave = function(btn) {
        const isSaved = btn.dataset.saved === 'true';
        const heartIcon = btn.querySelector('.heart-icon');
        
        if (isSaved) {
            heartIcon.innerHTML = icons.heart;
            btn.style.color = 'var(--text-muted)';
            btn.dataset.saved = 'false';
            btn.classList.remove('saved');
        } else {
            heartIcon.innerHTML = icons.heartFilled;
            btn.style.color = 'var(--error)';
            btn.dataset.saved = 'true';
            btn.classList.add('saved');
        }
        
        btn.style.transform = 'scale(1.2)';
        setTimeout(() => {
            btn.style.transform = 'scale(1)';
        }, 150);
    };

    window.nextHero = nextHero;
    window.previousHero = previousHero;
    window.togglePlay = togglePlay;

    // ===============================
    // INITIALIZATION
    // ===============================
    function init() {
        detectDevice();
        animateNavbarEntrance();
        addHoverEffects();
        setupIntersectionObserver();
        setupAccessibility();
        startHeroSlideshow();
        initializeIcons(); 
        
        // Load carousels
        loadCarousel('destCarousel', '/api/destinations', mockDestinations, false);
        loadCarousel('planCarousel', '/api/plans', mockPlans, true);
    }

    // ===============================
    // EVENT LISTENERS
    // ===============================
    
    // Scroll events with optimization
    window.addEventListener('scroll', () => {
        clearTimeout(scrollTimer);
        scrollTimer = setTimeout(() => {
            handleScroll();
            updateActiveLink();
        }, 10);
    }, { passive: true });

    // Resize events
    window.addEventListener('resize', () => {
        detectDevice();
        if (window.innerWidth > 768 && mobileToggle && mobileToggle.classList.contains('active')) {
            toggleMobileMenu();
        }
    });

    // Mobile menu toggle
    if (mobileToggle) {
        mobileToggle.addEventListener('click', toggleMobileMenu);
    }

    // Navigation links
    navLinks.forEach(link => {
        link.addEventListener('click', function (e) {
            const href = this.getAttribute('href');
            if (href && href.startsWith('#')) {
                e.preventDefault();
                smoothScrollTo(href);
                if (mobileToggle && mobileToggle.classList.contains('active')) {
                    toggleMobileMenu();
                }
            }
        });
    });

    // Carousel navigation buttons
    document.querySelectorAll('.car-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const target = document.getElementById(btn.dataset.target);
            if (target) {
                const step = 324; // card width + gap
                const direction = btn.classList.contains('left') ? -step : step;
                target.scrollBy({ left: direction, behavior: 'smooth' });
            }
        });
    });

    // Initialize everything
    init();
});
</script>
</body>
</html>