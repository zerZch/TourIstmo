<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>tourIstmo | Inicio</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Modak&family=Pacifico&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Quicksand:wght@300..700&display=swap" rel="stylesheet">

  <style>
    /* ===== VARIABLES GLOBALES ===== */
    :root {
      /* Paleta de colores touristmo */
      --primary-dark: #283951;
      --primary-teal: #588684;
      --primary-green: #8BAD65;
      --accent-orange: #D57133;
      --neutral-light: #E2E1E0;
      
      /* Gradientes temáticos */
      --gradient-primary: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-teal) 100%);
      --gradient-nature: linear-gradient(135deg, var(--primary-teal) 0%, var(--primary-green) 100%);
      --gradient-warm: linear-gradient(135deg, var(--accent-orange) 0%, #E8955A 100%);
      --gradient-overlay: linear-gradient(0deg, rgba(40, 57, 81, 0.7) 0%, rgba(40, 57, 81, 0.3) 100%);
      
      /* Colores de interfaz */
      --bg-primary: #FFFFFF;
      --bg-secondary: #F8F9FA;
      --bg-light: var(--neutral-light);
      --text-primary: var(--primary-dark);
      --text-secondary: #5A6B7D;
      --text-muted: #8A9BA8;
      --text-white: #FFFFFF;
      
      /* Colores de estado */
      --success: #4CAF50;
      --warning: #FFA726;
      --error: #E74C3C;
      --info: var(--primary-teal);
      
      /* Bordes y sombras */
      --border-color: #E1E8ED;
      --border-radius: 8px;
      --border-radius-lg: 12px;
      --border-radius-xl: 16px;
      --border-radius-full: 50px;
      
      /* Sombras */
      --shadow-sm: 0 1px 3px rgba(40, 57, 81, 0.08);
      --shadow-md: 0 4px 12px rgba(40, 57, 81, 0.12);
      --shadow-lg: 0 8px 25px rgba(40, 57, 81, 0.15);
      --shadow-xl: 0 15px 35px rgba(40, 57, 81, 0.20);
      
      /* Transiciones */
      --transition-fast: 0.2s ease;
      --transition-normal: 0.3s ease;
      --transition-slow: 0.5s ease;
      
      /* Espaciado */
      --spacing-xs: 4px;
      --spacing-sm: 8px;
      --spacing-md: 16px;
      --spacing-lg: 24px;
      --spacing-xl: 32px;
      --spacing-2xl: 48px;
      --spacing-3xl: 64px;
      
      /* Tipografía */
      --font-family-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      --font-family-display: 'Poppins', var(--font-family-primary);
      
      /* Tamaños de fuente */
      --text-xs: 0.75rem;
      --text-sm: 0.875rem;
      --text-base: 1rem;
      --text-lg: 1.125rem;
      --text-xl: 1.25rem;
      --text-2xl: 1.5rem;
      --text-3xl: 1.875rem;
      --text-4xl: 2.25rem;
      --text-5xl: 3rem;
      
      /* Pesos de fuente */
      --font-light: 300;
      --font-normal: 400;
      --font-medium: 500;
      --font-semibold: 600;
      --font-bold: 700;
    }

    /* ===== RESET Y BASE ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-family-primary);
      line-height: 1.6;
      color: var(--text-primary);
      background-color: var(--neutral-light);
    }

    .container {
      padding-left: 5%;
      padding-right: 5%;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* ===== SECCIÓN TÍTULOS ===== */
    .section-title {
      font-family: var(--font-family-display);
      font-size: var(--text-3xl);
      font-weight: var(--font-bold);
      color: var(--text-primary);
      margin-bottom: var(--spacing-2xl);
      text-align: center;
    }

    /* ===== BOTONES ===== */
    .btn-primary {
      display: inline-block;
      background: var(--accent-orange);
      color: var(--text-white);
      padding: var(--spacing-md) var(--spacing-xl);
      border: none;
      border-radius: var(--border-radius-full);
      font-weight: var(--font-semibold);
      font-size: var(--text-base);
      text-decoration: none;
      cursor: pointer;
      transition: var(--transition-normal);
      box-shadow: var(--shadow-md);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
      color: var(--text-white);
    }

    /* ===== MODERN NAVBAR ===== */
    .modern-navbar {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border-color);
      padding: 1rem 0;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: var(--shadow-md);
      margin-bottom: var(--spacing-xl);
    }

    .navbar-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 2rem;
    }

    .navbar-brand {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      text-decoration: none;
      color: inherit;
      transition: var(--transition-fast);
    }

    .navbar-brand:hover {
      transform: scale(1.05);
    }

    .navbar-brand img {
      height: 40px;
      width: auto;
    }

    .navbar-brand h1 {
      font-family: 'Pacifico', cursive;
      font-size: var(--text-2xl);
      margin: 0;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .navbar-nav {
      display: flex;
      list-style: none;
      margin: 0;
      padding: 0;
      gap: 2rem;
    }

    .navbar-nav li a {
      text-decoration: none;
      color: var(--text-primary);
      font-weight: var(--font-medium);
      font-size: var(--text-base);
      padding: 0.5rem 1rem;
      border-radius: var(--border-radius-full);
      transition: var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .navbar-nav li a::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: var(--gradient-primary);
      transition: left var(--transition-normal);
      z-index: -1;
    }

    .navbar-nav li a:hover::before {
      left: 0;
    }

    .navbar-nav li a:hover {
      color: var(--text-white);
      transform: translateY(-2px);
    }

    .navbar-actions {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .contact-btn {
      background: var(--gradient-primary);
      color: var(--text-white);
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: var(--border-radius-full);
      font-weight: var(--font-semibold);
      cursor: pointer;
      transition: var(--transition-normal);
      text-decoration: none;
      display: inline-block;
    }

    .contact-btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
      color: var(--text-white);
    }

    /* Mobile Responsive */
    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-primary);
    }

    @media (max-width: 768px) {
      .navbar-nav {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(10px);
        flex-direction: column;
        padding: 1rem;
        box-shadow: var(--shadow-lg);
        gap: 0.5rem;
      }

      .navbar-nav.active {
        display: flex;
      }

      .mobile-menu-btn {
        display: block;
      }

      .navbar-container {
        padding: 0 1rem;
      }

      .contact-btn {
        display: none;
      }
    }

    /* ===== TARJETAS MODERNAS ===== */
    .destination-card {
      background: var(--bg-secondary);
      border-radius: var(--border-radius-xl);
      overflow: hidden;
      transition: var(--transition-normal);
      text-decoration: none;
      color: inherit;
      display: block;
      flex: 0 0 300px;
      scroll-snap-align: start;
      box-shadow: var(--shadow-sm);
    }

    .destination-card:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-xl);
      color: inherit;
      text-decoration: none;
    }

    .destination-image {
      position: relative;
      height: 200px;
      overflow: hidden;
    }

    .destination-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: var(--transition-slow);
    }

    .destination-card:hover .destination-image img {
      transform: scale(1.1);
    }

    .destination-info {
      padding: var(--spacing-lg);
      position: relative;
      width: 100%;
    }

    /* ===== HORIZONTAL INFO CON CORAZÓN ===== */
    .horizontal-info {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--spacing-sm);
      margin-bottom: var(--spacing-sm);
      width: 100%;
    }

    .horizontal-info h4 {
      flex: 1;
      margin: 0;
      font-size: var(--text-lg);
      font-weight: var(--font-semibold);
      color: var(--text-primary);
      font-family: var(--font-family-display);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      min-width: 0;
    }

    .save-btn-overlay {
      background: rgba(0, 0, 0, 0.05);
      border: none;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      padding: 0;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition-fast);
      flex-shrink: 0;
      color: var(--text-muted);
    }

    .save-btn-overlay:hover {
      background: rgba(0, 0, 0, 0.1);
      transform: scale(1.1);
    }

    .save-btn-overlay.saved {
      background: rgba(220, 38, 38, 0.1);
      color: var(--error);
    }

    .save-btn-overlay.saved:hover {
      background: rgba(220, 38, 38, 0.15);
    }

    .heart-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 16px;
      height: 16px;
    }

    .heart-icon svg {
      width: 16px;
      height: 16px;
      fill: currentColor;
    }

    /* ===== OTROS ELEMENTOS DE LA TARJETA ===== */
    .destination-location {
      font-size: var(--text-sm);
      color: var(--text-secondary);
      margin-bottom: var(--spacing-xs);
      display: flex;
      align-items: center;
      gap: var(--spacing-xs);
    }

    .destination-date {
  display: inline-block;
  background-color: #e3f2fd;
  color: #1565c0;
  padding: 4px 12px;
  border-radius: 16px;
  font-size: 12px;
  font-weight: 500;
  text-transform: capitalize;
  margin-top: 8px;
  border: 1px solid #bbdefb;
  white-space: nowrap;
}

/* Variantes de color para diferentes tipos/categorías */
.destination-date.historico {
  background-color: #fff3e0;
  color: #ef6c00;
  border-color: #ffcc02;
}

.destination-date.natural {
  background-color: #e8f5e8;
  color: #2e7d32;
  border-color: #a5d6a7;
}

.destination-date.aventura {
  background-color: #fce4ec;
  color: #c2185b;
  border-color: #f8bbd9;
}

.destination-date.cultural {
  background-color: #f3e5f5;
  color: #7b1fa2;
  border-color: #ce93d8;
}

.destination-date.playa {
  background-color: #e0f2f1;
  color: #00695c;
  border-color: #80cbc4;
}

/* Hover effect */
.destination-date:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  transition: all 0.2s ease;
}

    .destination-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: var(--spacing-md);
    }

    .rating {
      font-size: var(--text-sm);
      font-weight: var(--font-medium);
      color: var(--accent-orange);
      display: flex;
      align-items: center;
      gap: var(--spacing-xs);
    }

    .price {
      font-size: var(--text-base);
      font-weight: var(--font-bold);
      color: var(--primary-teal);
    }

    /* ===== CARRUSEL ===== */
    .carousel-wrapper {
      position: relative;
      margin-bottom: var(--spacing-xl);
    }

    .carousel {
      display: flex;
      gap: var(--spacing-lg);
      overflow-x: auto;
      padding-bottom: var(--spacing-sm);
      scroll-behavior: smooth;
      scroll-snap-type: x mandatory;
    }

    .carousel::-webkit-scrollbar {
      height: 6px;
    }

    .carousel::-webkit-scrollbar-track {
      background: var(--bg-light);
      border-radius: var(--border-radius);
    }

    .carousel::-webkit-scrollbar-thumb {
      background: var(--primary-teal);
      border-radius: var(--border-radius);
    }

    /* ===== BOTONES DE NAVEGACIÓN ===== */
    .car-btn {
      position: absolute;
      top: 45%;
      transform: translateY(-50%);
      width: 48px;
      height: 48px;
      border: none;
      border-radius: 50%;
      background: var(--primary-teal);
      color: var(--text-white);
      font-size: var(--text-lg);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition-normal);
      box-shadow: var(--shadow-md);
      z-index: 10;
    }

    .car-btn:hover {
      transform: translateY(-50%) scale(1.1);
      box-shadow: var(--shadow-lg);
    }

    .car-btn.left {
      left: -24px;
    }

    .car-btn.right {
      right: -24px;
    }

    @media(max-width: 600px) {
      .car-btn {
        display: none;
      }
    }

    /* ===== HERO SECTION ===== */
    .hero-section {
      position: relative;
      height: 80vh;
      min-height: 600px;
      background: linear-gradient(135deg, rgba(40, 57, 81, 0.4), rgba(88, 134, 132, 0.3)),
        url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&h=1080&fit=crop') center/cover;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      color: var(--text-white);
      border-radius: var(--spacing-xl);
      overflow: hidden;
      margin: 0 var(--spacing-xl);
    }

    .hero-content {
      max-width: 1200px;
      width: 100%;
      padding: 0 var(--spacing-2xl);
      margin: 0 auto;
      z-index: 2;
    }

    .hero-title {
      font-family: var(--font-family-display);
      font-size: clamp(2.5rem, 8vw, 5rem);
      font-weight: var(--font-bold);
      line-height: 1.1;
      margin-bottom: var(--spacing-lg);
      text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      animation: fadeInUp 1s ease-out;
    }

    .hero-subtitle {
      font-size: var(--text-xl);
      font-weight: var(--font-normal);
      margin-bottom: var(--spacing-2xl);
      opacity: 0.95;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      animation: fadeInUp 1s ease-out 0.2s both;
    }

    .hero-cta {
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-sm);
      background: var(--accent-orange);
      color: var(--neutral-light);
      padding: var(--spacing-md) var(--spacing-xl);
      border-radius: var(--border-radius-full);
      font-weight: var(--font-semibold);
      font-size: var(--text-lg);
      text-decoration: none;
      transition: var(--transition-normal);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow-lg);
      animation: fadeInUp 1s ease-out 0.4s both;
    }

    .hero-cta:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-xl);
      background: var(--primary-teal);
      color: var(--neutral-light);
    }

    .hero-controls {
      position: absolute;
      bottom: var(--spacing-xl);
      left: var(--spacing-2xl);
      display: flex;
      gap: var(--spacing-md);
      z-index: 3;
    }

    .hero-control {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: var(--text-white);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition-normal);
      font-size: var(--text-lg);
    }

    .hero-control:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.1);
    }

    .hero-control.play {
      background: rgba(255, 255, 255, 0.9);
      color: var(--text-primary);
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ===== CONTENIDO PRINCIPAL ===== */
    .main-content {
      margin-top: var(--spacing-3xl);
      margin-bottom: var(--spacing-3xl);
    }

    @media (max-width: 768px) {
      .hero-section {
        height: 70vh;
        min-height: 500px;
        margin: 0 var(--spacing-md);
      }
      
      .hero-content {
        padding: 0 var(--spacing-lg);
      }
      
      .hero-controls {
        left: var(--spacing-lg);
        bottom: var(--spacing-lg);
      }
      
      .hero-control {
        width: 40px;
        height: 40px;
        font-size: var(--text-base);
      }

      .container {
        padding-left: var(--spacing-md);
        padding-right: var(--spacing-md);
      }

      .section-title {
        font-size: var(--text-2xl);
        margin-bottom: var(--spacing-xl);
      }

      .destination-card {
        flex: 0 0 280px;
      }

      .carousel {
        gap: var(--spacing-md);
      }

      .horizontal-info h4 {
        font-size: var(--text-base);
      }
      
      .save-btn-overlay {
        width: 28px;
        height: 28px;
      }
      
      .heart-icon,
      .heart-icon svg {
        width: 14px;
        height: 14px;
      }
    }

    /* ===== FOOTER ===== */
    footer {
      background: var(--gradient-primary);
      color: var(--text-white);
      padding: var(--spacing-2xl) 0;
      text-align: center;
    }

    footer .wrapper {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
    }
  </style>
</head>

<body>
<!-- ===== Modern Navbar ===== -->
<nav class="modern-navbar">
  <div class="navbar-container">
    <a href="pagina-principal.jsp" class="navbar-brand">
      <img src="assets/logo-touristmo.svg" alt="Logo tourIstmo" />
      <h1>tourIstmo</h1>
    </a>
    
    <ul class="navbar-nav" id="navbarNav">
      <li><a href="destino-pagina.jsp">Destinos</a></li>
      <li><a href="planes-pagina.jsp">Planes</a></li>
      <li><a href="perfil.html">Perfil</a></li>
    </ul>
    
    <div class="navbar-actions">
      <a href="contacto.html" class="contact-btn">Contáctanos</a>
      <button class="mobile-menu-btn" id="mobileMenuBtn">☰</button>
    </div>
  </div>
</nav>

<!-- ===== Hero Section ===== -->
<section class="hero-section">
  <div class="hero-content">
    <h1 class="hero-title">Explora las maravillas de Panamá</h1>
    <p class="hero-subtitle">Un lugar donde la naturaleza y la aventura se unen</p>
    <a href="#destinos" class="hero-cta">
      <span>Descubre más</span>
      <span>→</span>
    </a>
  </div>
  
  <div class="hero-controls">
    <button class="hero-control" onclick="previousHero()">‹</button>
    <button class="hero-control play" onclick="togglePlay()">▶</button>
  </div>
</section>

<!-- ===== Main Content ===== -->
<main class="main-content">
  <!-- ===== Destinos destacados ===== -->
  <section class="container" id="destinos">
    <h2 class="section-title">Top 6 destinos mejor valorados</h2>

    <div class="carousel-wrapper">
      <button class="car-btn left" data-target="destCarousel">‹</button>
      <div class="carousel" id="destCarousel"></div>
      <button class="car-btn right" data-target="destCarousel">›</button>
    </div>

    <div style="text-align:center;">
      <a href="destino-pagina.jsp" class="btn-primary">Ver todos los destinos</a>
    </div>
  </section>

  <!-- ===== Planes destacados ===== -->
  <section class="container" style="margin-top: var(--spacing-3xl);">
    <h2 class="section-title">Top 6 planes mejor valorados</h2>

    <div class="carousel-wrapper">
      <button class="car-btn left" data-target="planCarousel">‹</button>
      <div class="carousel" id="planCarousel"></div>
      <button class="car-btn right" data-target="planCarousel">›</button>
    </div>

    <div style="text-align:center;">
      <a href="planes-pagina.jsp" class="btn-primary">Ver todos los planes</a>
    </div>
  </section>
</main>

<!-- ===== Footer ===== -->
<footer>
  <div class="wrapper">
    <small>&copy; <span id="year"></span> tourIstmo · Todos los derechos reservados</small>
  </div>
</footer>

<!-- ===== Script ===== -->
<script>
/* ---- Hero controls functionality ---- */
const heroImages = [
  'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&h=1080&fit=crop', // Casco Viejo
  'https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=1920&h=1080&fit=crop', // Bocas del Toro
  'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=1920&h=1080&fit=crop', // Selva
  'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1920&h=1080&fit=crop'  // Playa
];

const heroTitles = [
  'Explora las maravillas de Panamá',
  'Descubre paraísos tropicales',
  'Aventúrate en la selva',
  'Relájate en playas pristinas'
];

const heroSubtitles = [
  'Un lugar donde la naturaleza y la aventura se unen',
  'Donde el mar Caribe te espera',
  'Experimenta la biodiversidad única',
  'Disfruta del sol y la arena blanca'
];

let currentHeroIndex = 0;
let isPlaying = true;
let heroInterval;

function updateHero(index) {
  const heroSection = document.querySelector('.hero-section');
  const heroTitle = document.querySelector('.hero-title');
  const heroSubtitle = document.querySelector('.hero-subtitle');
  
  heroSection.style.backgroundImage = `linear-gradient(135deg, rgba(40, 57, 81, 0.4), rgba(88, 134, 132, 0.3)), url('${heroImages[index]}')`;
  heroTitle.textContent = heroTitles[index];
  heroSubtitle.textContent = heroSubtitles[index];
}

function nextHero() {
  currentHeroIndex = (currentHeroIndex + 1) % heroImages.length;
  updateHero(currentHeroIndex);
}

function previousHero() {
  currentHeroIndex = currentHeroIndex === 0 ? heroImages.length - 1 : currentHeroIndex - 1;
  updateHero(currentHeroIndex);
}

function togglePlay() {
  const playBtn = document.querySelector('.hero-control.play');
  
  if (isPlaying) {
    clearInterval(heroInterval);
    playBtn.textContent = '▶';
    isPlaying = false;
  } else {
    heroInterval = setInterval(nextHero, 5000);
    playBtn.textContent = '⏸';
    isPlaying = true;
  }
}

function startHeroSlideshow() {
  heroInterval = setInterval(nextHero, 5000);
}

/* ---- Mobile menu toggle ---- */
document.getElementById('mobileMenuBtn').addEventListener('click', function() {
  const navbarNav = document.getElementById('navbarNav');
  navbarNav.classList.toggle('active');
});

/* ---- Close mobile menu when clicking on a link ---- */
document.querySelectorAll('.navbar-nav a').forEach(link => {
  link.addEventListener('click', () => {
    document.getElementById('navbarNav').classList.remove('active');
  });
});

/* ---- Endpoints reales ---- */
const apiTopDest = '/api/destinos/top?limit=6';
const apiTopPlan = '/api/planes/top?limit=6';

/* ---- Datos mock por si falla fetch ---- */
const mockDest = Array.from({length:6},(_,i)=>({
  id:i+1,
  nombre:'Casco Viejo',
  provincia:'Panamá',
  tipo:'Histórico',
  precio:i%2?25:null,
  rating: 4.9,
  imagen:'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=200&fit=crop'
}));

const mockPlan = Array.from({length:6},(_,i)=>({
  id:i+1,
  nombre:'Tour Bocas del Toro',
  provincia:'Bocas del Toro',
  tipo:'Aventura',
  precio:i%2?85:null,
  rating: 4.7,
  imagen:'https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=400&h=200&fit=crop'
}));

// Funciones helper para generar iconos SVG
const icons = {
  target: '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>',
  
  mapPin: '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>',
  
  star: '<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/></svg>',
  
  heart: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>',
  
  heartFilled: '<svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>'
};

function cardHTML(o, isPlan) {
  const url = isPlan ? `plan.html?id=${o.id}` : `destino.html?id=${o.id}`;
  const priceText = o.precio ? `$${o.precio}` : 'Gratis';
  const typeIcon = isPlan ? icons.target : icons.mapPin;
  
  return `
    <a href="${url}" class="destination-card">
      <div class="destination-image">
        <img src="${o.imagen}" alt="${o.nombre}">
      </div>
      <div class="destination-info">
        <div class="horizontal-info">
          <h4>${o.nombre}</h4>
          <button class="save-btn save-btn-overlay" onclick="event.preventDefault(); toggleSave(this)" data-saved="false">
            <span class="heart-icon">${icons.heart}</span>
          </button>
        </div>
        <p class="destination-location">
          <span class="location-icon">${typeIcon}</span>
          ${o.provincia}
        </p>
        <p class="destination-date ${o.tipo.toLowerCase()}">${o.tipo}</p>
        <div class="destination-meta">
          <span class="rating">
            <span class="star-icon">${icons.star}</span>
            ${o.rating || '4.5'}
          </span>
          <span class="price">${priceText}</span>
        </div>
      </div>
    </a>
  `;
}

async function loadCarousel(id, api, mock, isPlan = false) {
  const el = document.getElementById(id);
  try {
    const res = await fetch(api);
    const arr = await res.json();
    el.innerHTML = arr.map(o => cardHTML(o, isPlan)).join('');
  } catch(e) {
    console.warn('Using mock data for', id);
    el.innerHTML = mock.map(o => cardHTML(o, isPlan)).join('');
  }
}

/* ---- Función para toggle de favoritos ---- */
function toggleSave(btn) {
  const isSaved = btn.dataset.saved === 'true';
  const heartIcon = btn.querySelector('.heart-icon');
  
  if (isSaved) {
    // Cambiar a no guardado
    heartIcon.innerHTML = icons.heart;
    btn.style.color = 'var(--text-muted)';
    btn.dataset.saved = 'false';
    btn.classList.remove('saved');
  } else {
    // Cambiar a guardado
    heartIcon.innerHTML = icons.heartFilled;
    btn.style.color = 'var(--error)';
    btn.dataset.saved = 'true';
    btn.classList.add('saved');
  }
  
  // Añadir animación de pulso
  btn.style.transform = 'scale(1.2)';
  setTimeout(() => {
    btn.style.transform = 'scale(1)';
  }, 150);
}

/* ---- Navegación del carrusel ---- */
document.querySelectorAll('.car-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const target = document.getElementById(btn.dataset.target);
    const step = 324; // ancho de tarjeta + gap
    const dir = btn.classList.contains('left') ? -step : step;
    target.scrollBy({left: dir, behavior: 'smooth'});
  });
});

/* ---- Footer año ---- */
document.getElementById('year').textContent = new Date().getFullYear();

/* ---- Inicialización ---- */
loadCarousel('destCarousel', apiTopDest, mockDest, false);
loadCarousel('planCarousel', apiTopPlan, mockPlan, true);
startHeroSlideshow();
</script>
</body>
</html>