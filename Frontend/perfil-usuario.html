<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Perfil de Usuario - Jenna Smith</title>
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/perfil-usuario.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navbar Flotante -->
    <nav class="floating-navbar" id="navbar">
        <!-- Menú Izquierdo -->
        <div class="menu-left">
            <a href="#destino" class="nav-link">Destino</a>
            <a href="#planes" class="nav-link">Planes</a>
            <a href="#perfil" class="nav-link">Perfil</a>
        </div>

        <!-- Logo Central -->
        <div class="menu-center">
            <a href="#" class="menu-title">
                <img class="logo-icon" src="img/logo.svg" alt="">
                <span>TourIstmo</span>
            </a>
        </div>

        <!-- Menú Derecho -->
        <div class="menu-right">
            <a href="#login" class="cta-button-nav">Login</a>
        </div>

        <!-- Menú móvil hamburguesa -->
        <div class="mobile-menu-toggle" id="mobileToggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>


    <div class="container">
        <!-- Sidebar Izquierdo -->
        <aside class="sidebar">
            <!-- Información del Usuario -->
            <div class="user-info">
                <div class="user-avatar">
                    <img src="img/jenna.avif" alt="Jenna Smith">
                </div>
                <h1 class="user-name">Jenna Smith</h1>
                <p class="user-username">@jennasmith</p>
            </div>
        </aside>

        <!-- Contenido Principal -->
        <main class="main-content">
            <!-- Navegación de Destinos -->
            <nav class="destinations-nav">
                <h2>Destinos Recientes</h2>
                <div class="destinations-tabs">
                    <button class="tab-btn active">Todos</button>
                    <button class="tab-btn">Visitados</button>
                    <button class="tab-btn">Pendientes</button>
                </div>
            </nav>

            <!-- Grid de Destinos -->
            <section class="destinations-grid">
                <!-- El contenido será generado dinámicamente por JavaScript -->
            </section>

            <!-- Agregar mensaje de no resultados -->
            <div id="noResults" class="no-results" style="display: none;">
                <p><i data-lucide="search-x"></i> No se encontraron destinos para esta categoría.</p>
            </div>


            <!-- Sección de Sitios Guardados -->
            <section class="saved-places">
                <div class="section-header">
                    <h3>Sitios Guardados</h3>
                    <div class="filter-buttons">
                        <button class="filter-btn active">Todos</button>
                        <button class="filter-btn">Restaurantes</button>
                        <button class="filter-btn">Hoteles</button>
                        <button class="filter-btn">Atracciones</button>
                    </div>
                </div>

                
            
        </main>
    </div>

    <!-- ===== Footer ===== -->
<footer class="footer">
    <div class="footer-container">
        <div class="footer-grid">
            <!-- Logo y descripción -->
            <div class="footer-brand">
                <a href="#" class="footer-logo">
                    <img class="logo-icon"  src="img/logowhite.png" alt="">
                    <span class="footer-logo-text">TourIstmo</span>
                </a>
                <p class="footer-description">
                    Explora, comparte y disfruta de los mejores destinos turísticos de Panamá. 
                    Tu aventura comienza aquí.
                </p>
            </div>
  
            <!-- Navegación principal -->
            <div class="footer-section">
                <h4>TourIstmo</h4>
                <ul class="footer-links">
                    <li><a href="index.jsp">Inicio</a></li>
                    <li><a href="formulario.jsp">Agregar Destino</a></li>
                    <li><a href="planes.jsp">Planes Turísticos</a></li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">Reservar</a></li>
                </ul>
            </div>
  
            <!-- Colaboración y Soporte -->
            <div class="footer-section">
                <h4>Colabora</h4>
                <ul class="footer-links">
                    <li><a href="#">Únete al equipo</a></li>
                    <li><a href="#">Publica tus planes</a></li>
                </ul>
                
                <h4 style="margin-top: var(--spacing-lg);">Soporte</h4>
                <ul class="footer-links">
                    <li><a href="#">Términos y Condiciones</a></li>
                    <li><a href="#">Privacidad</a></li>
                    <li><a href="#">Ayuda</a></li>
                </ul>
            </div>
  
            <!-- Métodos de pago y app -->
            <div class="footer-section">
                <div class="footer-payments">
                    <h4>Métodos de Pago</h4>
                    <div class="payment-methods">
                        <div class="payment-icon">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/4/41/Visa_Logo.png" alt="Visa">
                        </div>
                        <div class="payment-icon">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/0/04/Mastercard-logo.png" alt="Mastercard">
                        </div>
                        <div class="payment-icon">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg" alt="PayPal">
                        </div>
                    </div>
                </div>
                
                <div class="footer-app">
                    <h4>Descarga la App</h4>
                    <a href="#" class="app-download">
                        <img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="Descargar en App Store">
                    </a>
                </div>
            </div>
        </div>
  
        <div class="footer-bottom">
            <p class="footer-copyright">
                © 2025 Touristmo. Todos los derechos reservados.
            </p>
        </div>
    </div>
  </footer>
  <script>
    // ============================================
// DATOS DE EJEMPLO
// ============================================

// Destinos recientes del usuario (usando el mismo formato que ya tienes)
const destinosRecientes = [
    {
        nombre: "Biomuseo",
        imagen: "https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
        provincia: "Panamá",
        precio: "$25",
        rating: "4.5",
        tipo: "Museo",
        estado: "Visitado",
        visitado: "marzo 2024",
        duracion: "2-3 horas",
        favorito: true
    },
    {
        nombre: "Casco Viejo",
        imagen: "https://images.unsplash.com/photo-1540610410855-b4c8877b761c?auto=format&fit=crop&w=400&q=80",
        provincia: "Panamá",
        precio: "Gratis",
        rating: "4.8",
        tipo: "Histórico",
        estado: "Visitado",
        visitado: "enero 2024",
        duracion: "Medio día",
        favorito: false
    },
    {
        nombre: "Parque Nacional Soberanía",
        imagen: "https://images.unsplash.com/photo-1518837695005-2083093ee35b?auto=format&fit=crop&w=400&q=80",
        provincia: "Panamá",
        precio: "$60",
        rating: "4.8",
        tipo: "Naturaleza",
        estado: "Pendiente",
        duracion: "Día completo",
        favorito: true
    },
    {
        nombre: "Esclusas de Miraflores",
        imagen: "https://images.unsplash.com/photo-1645932700624-5075c8d2df58?auto=format&fit=crop&w=400&q=80",
        provincia: "Panamá",
        precio: "$18",
        rating: "4.9",
        tipo: "Histórico",
        estado: "Visitado",
        visitado: "febrero 2024",
        duracion: "2 horas",
        favorito: true
    },
    {
        nombre: "Isla Taboga",
        imagen: "https://images.unsplash.com/photo-1544551763-46a013bb70d5?auto=format&fit=crop&w=400&q=80",
        provincia: "Panamá",
        precio: "$35",
        rating: "4.6",
        tipo: "Playa",
        estado: "Pendiente",
        duracion: "Día completo",
        favorito: false
    }
];

// Sitios guardados del usuario (restaurantes, hoteles, atracciones)
const sitiosGuardados = [
    {
        nombre: "Restaurante Maito",
        imagen: "https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?auto=format&fit=crop&w=400&q=80",
        ubicacion: "Casco Viejo, Panamá",
        categoria: "Restaurantes",
        rating: "4.7",
        precio: "$$$",
        telefono: "+507 228-9606",
        horario: "12:00 PM - 10:00 PM",
        descripcion: "Restaurante de alta cocina panameña",
        favorito: true
    },
    {
        nombre: "Hotel Bristol Panama",
        imagen: "https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?auto=format&fit=crop&w=400&q=80",
        ubicacion: "Vía España, Panamá",
        categoria: "Hoteles",
        rating: "4.5",
        precio: "$$$",
        telefono: "+507 264-0000",
        servicios: ["WiFi", "Spa", "Piscina", "Gym"],
        descripcion: "Hotel de lujo en el corazón de la ciudad",
        favorito: false
    },
    {
        nombre: "Parque Natural Metropolitano",
        imagen: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&fit=crop&w=400&q=80",
        ubicacion: "Panamá",
        categoria: "Atracciones",
        rating: "4.4",
        precio: "$10",
        telefono: "+507 232-5552",
        horario: "6:00 AM - 5:00 PM",
        descripcion: "Parque natural urbano con senderos y vida silvestre",
        favorito: true
    },
    {
        nombre: "Donde José",
        imagen: "https://images.unsplash.com/photo-1414235077428-338989a2e8c0?auto=format&fit=crop&w=400&q=80",
        ubicacion: "Casco Viejo, Panamá",
        categoria: "Restaurantes",
        rating: "4.3",
        precio: "$$",
        telefono: "+507 262-1682",
        horario: "11:00 AM - 11:00 PM",
        descripcion: "Comida tradicional panameña en ambiente familiar",
        favorito: false
    },
    {
        nombre: "The American Trade Hotel",
        imagen: "https://images.unsplash.com/photo-1564501049412-61c2a3083791?auto=format&fit=crop&w=400&q=80",
        ubicacion: "Casco Viejo, Panamá",
        categoria: "Hoteles",
        rating: "4.6",
        precio: "$$$$",
        telefono: "+507 211-2200",
        servicios: ["WiFi", "Restaurante", "Bar", "Terraza"],
        descripcion: "Hotel boutique histórico con diseño contemporáneo",
        favorito: true
    },
    {
        nombre: "Amador Causeway",
        imagen: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=400&q=80",
        ubicacion: "Panamá",
        categoria: "Atracciones",
        rating: "4.2",
        precio: "Gratis",
        telefono: "N/A",
        horario: "24 horas",
        descripcion: "Calzada escénica con vista al skyline de la ciudad",
        favorito: false
    }
];

// ============================================
// FUNCIONES PRINCIPALES
// ============================================

function createDestinationCard(destination) {
    return `
        <div class="destination-card" data-category="${destination.tipo.toLowerCase()}" data-state="${destination.estado.toLowerCase()}">
            <div class="destination-image">
                <img src="${destination.imagen}" alt="${destination.nombre}" class="destination-img">
                <button class="save-btn" onclick="toggleSave(this)" data-saved="${destination.favorito}">
                    <i data-lucide="heart"></i>
                </button>
                <div class="destination-badge ${destination.estado.toLowerCase()}">
                    <span class="badge-text">${destination.estado}</span>
                </div>
            </div>
            <div class="destination-info">
                <h3 class="destination-name">${destination.nombre}</h3>
                <div class="destination-meta">
                    <span class="destination-location">
                        <i data-lucide="map-pin"></i> ${destination.provincia}
                    </span>
                    <span class="destination-type">
                        <i data-lucide="${getTypeIcon(destination.tipo)}"></i> ${destination.tipo}
                    </span>
                </div>
                <div class="destination-rating">
                    <div class="rating">
                        <i data-lucide="star"></i>
                        <span class="rating-value">${destination.rating}</span>
                    </div>
                    <span class="price-text">
                        <i data-lucide="dollar-sign"></i> ${destination.precio}
                    </span>
                </div>
                <div class="destination-details">
                    <div class="destination-date">
                        ${destination.visitado ? 
                            `<i data-lucide="check-circle"></i> Visitado en ${destination.visitado}` : 
                            `<i data-lucide="clock"></i> Pendiente por visitar`
                        }
                    </div>
                    <div class="destination-duration">
                        <i data-lucide="timer"></i> ${destination.duracion}
                    </div>
                </div>
            </div>
        </div>
    `;
}

// Función para crear cartas de sitios guardados
function createSavedPlaceCard(place) {
    return `
        <div class="saved-place-card" data-category="${place.categoria.toLowerCase()}">
            <div class="saved-place-image">
                <img src="${place.imagen}" alt="${place.nombre}" class="saved-place-img">
                <button class="save-btn" onclick="toggleSave(this)" data-saved="${place.favorito}">
                    <i data-lucide="heart"></i>
                </button>
                <div class="category-badge ${place.categoria.toLowerCase()}">
                    <span class="category-text">${place.categoria}</span>
                </div>
            </div>
            <div class="saved-place-info">
                <h3 class="saved-place-name">${place.nombre}</h3>
                <div class="saved-place-meta">
                    <span class="saved-place-location">
                        <i data-lucide="map-pin"></i> ${place.ubicacion}
                    </span>
                    <div class="saved-place-rating">
                        <div class="rating">
                            <i data-lucide="star"></i>
                            <span class="rating-value">${place.rating}</span>
                        </div>
                        <span class="price-level">${place.precio}</span>
                    </div>
                </div>
                <div class="saved-place-details">
                    ${place.telefono && place.telefono !== 'N/A' ? 
                        `<div class="contact-info">
                            <i data-lucide="phone"></i> ${place.telefono}
                        </div>` : ''
                    }
                    ${place.horario ? 
                        `<div class="schedule-info">
                            <i data-lucide="clock"></i> ${place.horario}
                        </div>` : ''
                    }
                    ${place.servicios ? 
                        `<div class="services-info">
                            <i data-lucide="check-circle"></i> ${place.servicios.join(', ')}
                        </div>` : ''
                    }
                </div>
                <p class="saved-place-description">${place.descripcion}</p>
            </div>
        </div>
    `;
}

// Función para cargar destinos recientes
function loadDestinationsRecent() {
    const grid = document.querySelector('.destinations-grid');
    if (!grid) {
        console.log('No se encontró .destinations-grid');
        return;
    }

    // Limpiar grid existente
    grid.innerHTML = '';

    // Generar cartas de destinos
    destinosRecientes.forEach(destination => {
        const cardHTML = createDestinationCard(destination);
        grid.innerHTML += cardHTML;
    });

    // Configurar manejo de errores de imágenes
    setupImageErrorHandling();
    
    // Reinicializar iconos de Lucide
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }

    console.log('Destinos recientes cargados:', destinosRecientes.length);
}

// Función para cargar sitios guardados
function loadSavedPlaces() {
    const savedPlacesSection = document.querySelector('.saved-places');
    if (!savedPlacesSection) {
        console.log('No se encontró .saved-places');
        return;
    }

    // Buscar si ya existe un grid de sitios guardados, sino crearlo
    let savedPlacesGrid = savedPlacesSection.querySelector('.saved-places-grid');
    if (!savedPlacesGrid) {
        savedPlacesGrid = document.createElement('div');
        savedPlacesGrid.className = 'saved-places-grid';
        savedPlacesSection.appendChild(savedPlacesGrid);
    }

    // Limpiar grid existente
    savedPlacesGrid.innerHTML = '';

    // Generar cartas de sitios guardados
    sitiosGuardados.forEach(place => {
        const cardHTML = createSavedPlaceCard(place);
        savedPlacesGrid.innerHTML += cardHTML;
    });

    // Configurar manejo de errores de imágenes
    setupImageErrorHandling();
    
    // Reinicializar iconos de Lucide
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }

    console.log('Sitios guardados cargados:', sitiosGuardados.length);
}

// Función para configurar manejo de errores de imágenes
function setupImageErrorHandling() {
    document.querySelectorAll('img').forEach(img => {
        if (!img.hasAttribute('data-error-handled')) {
            img.setAttribute('data-error-handled', 'true');
            img.onerror = function() {
                const w = this.width || 400;
                const h = this.height || 300;
                const txt = this.alt.charAt(0).toUpperCase() || '?';
                this.src = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${w}' height='${h}'%3E%3Crect width='${w}' height='${h}' fill='%23E0E6ED'/%3E%3Ctext x='50%25' y='50%25' font-size='48' fill='%237F8C8D' text-anchor='middle' alignment-baseline='middle'%3E${txt}%3C/text%3E%3C/svg%3E`;
            };
        }
    });
}

// Función para obtener el icono según el tipo de destino (ya existe en tu código)
function getTypeIcon(tipo) {
    const iconMap = {
        'Naturaleza': 'tree-pine',
        'Histórico': 'landmark',
        'Museo': 'building',
        'Playa': 'waves',
        'Aventura': 'mountain',
        'Gastronomía': 'utensils',
        'Cultura': 'palette',
        'Religioso': 'church',
        'Arqueológico': 'pyramid',
        'Parque': 'trees'
    };
    return iconMap[tipo] || 'map-pin';
}

// Función para obtener el icono según la categoría de sitio guardado
function getCategoryIcon(categoria) {
    const iconMap = {
        'Restaurantes': 'utensils',
        'Hoteles': 'bed',
        'Atracciones': 'camera',
        'Entretenimiento': 'music'
    };
    return iconMap[categoria] || 'map-pin';
}

// Función para alternar el estado de guardado/favorito (adaptada de tu código)
function toggleSave(button) {
    const isSaved = button.dataset.saved === 'true';
    button.dataset.saved = !isSaved;

    // Cambiar el icono visual
    if (!isSaved) {
        button.innerHTML = '<i data-lucide="heart" class="filled"></i>';
        button.classList.add('saved');
    } else {
        button.innerHTML = '<i data-lucide="heart"></i>';
        button.classList.remove('saved');
    }

    // Reinicializar iconos
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }

    console.log('Toggled save state:', !isSaved);
}

// ============================================
// FILTROS PARA DESTINOS RECIENTES
// ============================================

// Función para filtrar destinos recientes (adaptada de tu código)
function filterDestinations(category) {
    const destinationCards = document.querySelectorAll('.destination-card');
    const noResults = document.getElementById('noResults');
    let visibleCards = 0;
    
    console.log('Filtrando por categoría:', category);

    destinationCards.forEach((card, index) => {
        const categoryElement = card.querySelector('.destination-type');
        const cardCategory = categoryElement ? categoryElement.textContent.toLowerCase().replace(/.*\s/, '') : '';
        
        const stateElement = card.querySelector('.destination-badge .badge-text');
        const cardState = stateElement ? stateElement.textContent.toLowerCase() : '';
        
        // Resetear animación
        card.style.animation = 'none';
        card.style.animationDelay = '0s';
        
        let shouldShow = false;
        
        if (category === 'todos') {
            shouldShow = true;
        } else if (category === 'visitados') {
            shouldShow = cardState === 'visitado';
        } else if (category === 'pendientes') {
            shouldShow = cardState === 'pendiente';
        } else {
            shouldShow = cardCategory === category;
        }
        
        if (shouldShow) {
            card.classList.remove('hidden');
            card.style.display = 'block';
            
            setTimeout(() => {
                card.style.animationDelay = `${visibleCards * 0.1}s`;
                card.style.animation = 'fadeInUp 0.6s ease forwards';
            }, 10);
            
            visibleCards++;
        } else {
            card.classList.add('hidden');
            card.style.display = 'none';
        }
    });

    // Manejo de mensaje "no hay resultados"
    if (noResults) {
        noResults.style.display = visibleCards === 0 ? 'block' : 'none';
    }
}

// ============================================
// FILTROS PARA SITIOS GUARDADOS
// ============================================

// Función para filtrar sitios guardados
function filterSavedPlaces(category) {
    const savedPlaceCards = document.querySelectorAll('.saved-place-card');
    let visibleCards = 0;
    
    console.log('Filtrando sitios guardados por categoría:', category);

    savedPlaceCards.forEach((card, index) => {
        const cardCategory = card.dataset.category;
        
        // Resetear animación
        card.style.animation = 'none';
        card.style.animationDelay = '0s';
        
        let shouldShow = false;
        
        if (category === 'todos') {
            shouldShow = true;
        } else {
            shouldShow = cardCategory === category;
        }
        
        if (shouldShow) {
            card.classList.remove('hidden');
            card.style.display = 'block';
            
            setTimeout(() => {
                card.style.animationDelay = `${visibleCards * 0.1}s`;
                card.style.animation = 'fadeInUp 0.6s ease forwards';
            }, 10);
            
            visibleCards++;
        } else {
            card.classList.add('hidden');
            card.style.display = 'none';
        }
    });

    console.log('Sitios guardados visibles:', visibleCards);
}

// ============================================
// INICIALIZACIÓN
// ============================================

// Función para inicializar los filtros de destinos recientes
function initializeDestinationFilters() {
    const tabButtons = document.querySelectorAll('.destinations-tabs .tab-btn');
    
    if (tabButtons.length === 0) {
        console.log('No se encontraron botones de filtro de destinos');
        return;
    }

    tabButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Remover clase active de todos los botones
            tabButtons.forEach(btn => btn.classList.remove('active'));
            
            // Añadir clase active al botón clickeado
            this.classList.add('active');
            
            // Obtener categoría del texto del botón
            const category = this.textContent.toLowerCase();
            filterDestinations(category);
        });
    });
}

// Función para inicializar los filtros de sitios guardados
function initializeSavedPlacesFilters() {
    const filterButtons = document.querySelectorAll('.saved-places .filter-btn');
    
    if (filterButtons.length === 0) {
        console.log('No se encontraron botones de filtro de sitios guardados');
        return;
    }

    filterButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Remover clase active de todos los botones
            filterButtons.forEach(btn => btn.classList.remove('active'));
            
            // Añadir clase active al botón clickeado
            this.classList.add('active');
            
            // Obtener categoría del texto del botón
            const category = this.textContent.toLowerCase();
            filterSavedPlaces(category);
        });
    });
}

// Función principal de inicialización
function initializeAll() {
    // Cargar contenido
    loadDestinationsRecent();
    loadSavedPlaces();
    
    // Inicializar filtros
    initializeDestinationFilters();
    initializeSavedPlacesFilters();
    
    // Filtrar por defecto
    setTimeout(() => {
        filterDestinations('todos');
        filterSavedPlaces('todos');
    }, 100);
    
    console.log('Aplicación inicializada correctamente');
}

// Event listener para cuando se carga el DOM
document.addEventListener('DOMContentLoaded', function() {
    // Inicializar Lucide Icons
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }
    
    // Inicializar toda la aplicación
    initializeAll();
});

// Event listener global para botones de favorito
document.addEventListener('click', function(e) {
    if (e.target.closest('.save-btn')) {
        const button = e.target.closest('.save-btn');
        toggleSave(button);
    }
});
  </script>
</body>
</html>