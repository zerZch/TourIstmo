<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOURISTMO - Crear Plan Tur칤stico</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/formulario.css">
</head>
<body>
    <div class="main-container">
        <!-- Panel Izquierdo -->
        <div class="left-panel">
            <div class="logo-section">
                <div class="logo">
                    <div class="logo-icon">游꺖</div>
                    <div class="logo-text">TourPlan</div>
                </div>
            </div>
            
            <div class="progress-section">
                <div class="progress-title">Crear Plan Tur칤stico</div>
                <div class="progress-steps">
                    <div class="step active" data-step="1">
                        <div class="step-indicator">1</div>
                        <div class="step-text">Informaci칩n B치sica</div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-indicator">2</div>
                        <div class="step-text">Descripci칩n y Fechas</div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-indicator">3</div>
                        <div class="step-text">Imagen del Plan</div>
                    </div>
                    <div class="step" data-step="4">
                        <div class="step-indicator">4</div>
                        <div class="step-text">Detalles Adicionales</div>
                    </div>
                    <div class="step" data-step="5">
                        <div class="step-indicator">5</div>
                        <div class="step-text">URLs y Ubicaci칩n</div>
                    </div>
                    <div class="step" data-step="6">
                        <div class="step-indicator">6</div>
                        <div class="step-text">Confirmaci칩n</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
            
            <div></div>
        </div>

        <!-- Panel Derecho -->
        <div class="right-panel">
            <form id="tourPlanForm">
                <!-- Secci칩n 1: Informaci칩n b치sica -->
                <div class="form-section active" data-section="1">
                    <div class="form-header">
                        <h2 class="form-title">Informaci칩n B치sica</h2>
                        <p class="form-subtitle">Ingresa los datos principales de tu plan tur칤stico</p>
                    </div>
                    
                    <input type="hidden" name="PSO_ID_EMPRESA" value="1" />
                    <input type="hidden" name="PSO_ID_USUARIO_SOLICITA" value="1" />
                    
                    <div class="form-group">
                        <label class="form-label" for="nombre">Nombre del Plan</label>
                        <input type="text" name="PSO_NOMBRE" id="nombre" class="form-input" required 
                               placeholder="Ej: Tour por Casco Viejo, Aventura en Volc치n Bar칰..." />
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="precio">Precio (USD)</label>
                            <input type="number" name="PSO_PRECIO" id="precio" class="form-input" required 
                                   min="0" step="0.01" placeholder="150.00" />
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="personas">Cantidad de Personas</label>
                            <input type="number" name="PSO_CANTIDAD_PERSONAS" id="personas" class="form-input" 
                                   min="1" max="50" required placeholder="4" />
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="provincia">Provincia</label>
                            <select name="PSO_ID_PROVINCIA" id="provincia" class="form-select" required>
                                <option value="">Selecciona una provincia</option>
                                <option value="1">Bocas del Toro</option>
                                <option value="2">Cocl칠</option>
                                <option value="3">Col칩n</option>
                                <option value="4">Chiriqu칤</option>
                                <option value="5">Dari칠n</option>
                                <option value="6">Herrera</option>
                                <option value="7">Los Santos</option>
                                <option value="8">Panam치</option>
                                <option value="9">Veraguas</option>
                                <option value="10">Panam치 Oeste</option>
                                <option value="11">Guna Yala</option>
                                <option value="12">Ember치-Wounaan</option>
                                <option value="13">Ng칛be-Bugl칠</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="distrito">Distrito</label>
                            <select name="PSO_ID_DISTRITO" id="distrito" class="form-select" required>
                                <option value="">Selecciona un distrito</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Secci칩n 2: Descripci칩n y fechas -->
                <div class="form-section" data-section="2">
                    <div class="form-header">
                        <h2 class="form-title">Descripci칩n y Fechas</h2>
                        <p class="form-subtitle">Describe tu plan y establece las fechas de disponibilidad</p>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="descripcion">Descripci칩n Principal</label>
                        <textarea name="PSO_DESCRIPCION_PRINCIPAL" id="descripcion" class="form-textarea" required rows="4"
                                  placeholder="Describe los atractivos y actividades incluidas en el plan..."></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="fecha_inicio">Fecha de Inicio</label>
                            <input type="date" name="PSO_FECHA_INICIO" id="fecha_inicio" class="form-input" required />
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="fecha_fin">Fecha de Fin</label>
                            <input type="date" name="PSO_FECHA_FINAL" id="fecha_fin" class="form-input" required />
                        </div>
                    </div>
                </div>

                <!-- Secci칩n 3: Imagen del plan -->
                <div class="form-section" data-section="3">
                    <div class="form-header">
                        <h2 class="form-title">Imagen del Plan</h2>
                        <p class="form-subtitle">A침ade una imagen atractiva que represente tu plan tur칤stico</p>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Imagen Principal del Plan</label>
                        <div class="image-upload-container" id="imageUploadContainer">
                            <div class="image-upload-icon">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <div class="image-upload-text">Arrastra y suelta tu imagen aqu칤</div>
                            <div class="image-upload-subtext">o haz clic para seleccionar un archivo</div>
                            <input type="file" name="imagen" id="imagen" accept="image/*" style="display: none;" />
                        </div>
                        <div id="imagePreviewContainer" style="display: none;">
                            <img id="imagePreview" class="image-preview" />
                            <div class="image-info">
                                <span id="imageInfo">Archivo seleccionado</span>
                                <button type="button" class="remove-image" onclick="removeImage()">
                                    <i class="fas fa-trash"></i> Eliminar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Secci칩n 4: Detalles y precios -->
                <div class="form-section" data-section="4">
                    <div class="form-header">
                        <h2 class="form-title">Detalles Adicionales</h2>
                        <p class="form-subtitle">Informaci칩n complementaria sobre horarios y requisitos</p>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="horarios">Horarios Disponibles</label>
                        <input type="text" name="PSO_HORARIOS_DISPONIBLES" id="horarios" class="form-input"
                               placeholder="Ej: 8:00 AM - 5:00 PM, Lunes a Viernes" />
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="requisitos">Requisitos</label>
                        <textarea name="PSO_REQUISITOS" id="requisitos" class="form-textarea" rows="3"
                                  placeholder="Ej: Documento de identidad, ropa c칩moda, protector solar..."></textarea>
                    </div>
                </div>

                <!-- Secci칩n 5: URLs y ubicaci칩n -->
                <div class="form-section" data-section="5">
                    <div class="form-header">
                        <h2 class="form-title">URLs y Ubicaci칩n</h2>
                        <p class="form-subtitle">Enlaces importantes para tu plan tur칤stico</p>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="mapa_url">URL de Ubicaci칩n (Google Maps)</label>
                        <input type="url" name="PSO_UBICACION_MAPA_URL" id="mapa_url" class="form-input"
                               placeholder="https://maps.google.com/..." />
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="comprar_url">URL para Reservar/Comprar</label>
                        <input type="url" name="PSO_COMPRAR_URL" id="comprar_url" class="form-input"
                               placeholder="https://..." />
                    </div>
                </div>

                <!-- Secci칩n 6: Confirmaci칩n -->
                <div class="form-section" data-section="6">
                    <div class="form-header">
                        <h2 class="form-title">Confirmaci칩n</h2>
                        <p class="form-subtitle">Revisa la informaci칩n antes de crear tu plan</p>
                    </div>
                    
                    <div class="form-group">
                        <h3 style="color: var(--primary-dark); margin-bottom: 20px;">Resumen del Plan Tur칤stico</h3>
                        <div id="summaryContent" style="background: #F9FAFB; padding: 20px; border-radius: 16px; border: 2px solid #E5E7EB;">
                            <div class="summary-item">
                                <span class="summary-label">Nombre:</span>
                                <span class="summary-value" id="summaryNombre">-</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Precio:</span>
                                <span class="summary-value" id="summaryPrecio">-</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Personas:</span>
                                <span class="summary-value" id="summaryPersonas">-</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Fechas:</span>
                                <span class="summary-value" id="summaryFechas">-</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Descripci칩n:</span>
                                <span class="summary-value" id="summaryDescripcion">-</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Provincia:</span>
                                <span class="summary-value" id="summaryProvincia">-</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Distrito:</span>
                                <span class="summary-value" id="summaryDistrito">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Botones de navegaci칩n -->
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="prevBtn" onclick="previousStep()">
                        <i class="fas fa-arrow-left"></i> Anterior
                    </button>
                    <button type="button" class="btn btn-primary" id="nextBtn" onclick="nextStep()">
                        Siguiente <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 6;

        // Datos de distritos por provincia
        const distritosPorProvincia = {
            1: ['Bocas del Toro', 'Changuinola', 'Chiriqu칤 Grande'], // Bocas del Toro
            2: ['Aguadulce', 'Ant칩n', 'La Pintada', 'Nat치', 'Ol치', 'Penonom칠'], // Cocl칠
            3: ['Col칩n', 'Chagres', 'Donoso', 'Portobelo', 'Santa Isabel'], // Col칩n
            4: ['Alanje', 'Bar칰', 'Boquer칩n', 'Boquete', 'Bugaba', 'David', 'Dolega', 'Gualaca', 'Remedios', 'Renacimiento', 'San F칠lix', 'San Lorenzo', 'Tol칠'], // Chiriqu칤
            5: ['Chepigana', 'Pinogana'], // Dari칠n
            6: ['Chitr칠', 'Las Minas', 'Los Pozos', 'Oc칰', 'Parita', 'Pes칠', 'Santa Mar칤a'], // Herrera
            7: ['Guarar칠', 'Las Tablas', 'Los Santos', 'Macaracas', 'Pedas칤', 'Pocr칤', 'Tonos칤'], // Los Santos
            8: ['Balboa', 'Chepo', 'Chim치n', 'Panam치', 'San Miguelito', 'Taboga'], // Panam치
            9: ['Atalaya', 'Calobre', 'Ca침azas', 'La Mesa', 'Las Palmas', 'Montijo', 'R칤o de Jes칰s', 'San Francisco', 'Santa F칠', 'Santiago', 'Son치'], // Veraguas
            10: ['Arraij치n', 'Capira', 'Chame', 'La Chorrera', 'San Carlos'], // Panam치 Oeste
            11: ['Nargan치', 'Sicuani', 'Tubual치'], // Guna Yala
            12: ['C칠maco', 'Samb칰'], // Ember치-Wounaan
            13: ['Besiko', 'Jirondai', 'Kankint칰', 'Kusap칤n', 'Miron칩', 'M칲na', 'Nole Duima', '칌칲r칲m'] // Ng칛be-Bugl칠
        };

        // Inicializar formulario
        document.addEventListener('DOMContentLoaded', function() {
            updateNavigationButtons();
            updateProgressBar();
            setupImageUpload();
            setupFormValidation();
            setupProvinceDistrictChange();
        });

        // Navegaci칩n entre pasos
        function nextStep() {
            if (validateCurrentStep()) {
                if (currentStep < totalSteps) {
                    currentStep++;
                    showStep(currentStep);
                    updateProgressBar();
                    updateNavigationButtons();
                    updateSummary();
                }
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
                updateProgressBar();
                updateNavigationButtons();
            }
        }

        function showStep(step) {
            // Ocultar todas las secciones
            document.querySelectorAll('.form-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Mostrar secci칩n actual
            document.querySelector(`[data-section="${step}"]`).classList.add('active');
            
            // Actualizar pasos en sidebar
            document.querySelectorAll('.step').forEach((stepEl, index) => {
                stepEl.classList.remove('active', 'completed');
                if (index + 1 === step) {
                    stepEl.classList.add('active');
                } else if (index + 1 < step) {
                    stepEl.classList.add('completed');
                }
            });
        }

        function updateProgressBar() {
            const progressFill = document.getElementById('progressFill');
            const progress = (currentStep / totalSteps) * 100;
            progressFill.style.width = progress + '%';
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.style.display = currentStep === 1 ? 'none' : 'flex';
            
            if (currentStep === totalSteps) {
                nextBtn.innerHTML = '<i class="fas fa-check"></i> Crear Plan';
                nextBtn.onclick = submitForm;
            } else {
                nextBtn.innerHTML = 'Siguiente <i class="fas fa-arrow-right"></i>';
                nextBtn.onclick = nextStep;
            }
        }

        // Validaci칩n de formulario
        function validateCurrentStep() {
            const currentSection = document.querySelector(`[data-section="${currentStep}"]`);
            const requiredFields = currentSection.querySelectorAll('[required]');
            let isValid = true;

            requiredFields.forEach(field => {
                field.classList.remove('field-validation');
                if (!field.value.trim()) {
                    field.classList.add('field-validation');
                    isValid = false;
                } else {
                    field.classList.add('field-valid');
                }
            });

            // Validaciones espec칤ficas
            if (currentStep === 1) {
                const precio = document.getElementById('precio');
                const personas = document.getElementById('personas');
                
                if (precio.value && parseFloat(precio.value) <= 0) {
                    precio.classList.add('field-validation');
                    isValid = false;
                }
                
                if (personas.value && parseInt(personas.value) <= 0) {
                    personas.classList.add('field-validation');
                    isValid = false;
                }
            }

            if (currentStep === 2) {
                const fechaInicio = document.getElementById('fecha_inicio');
                const fechaFin = document.getElementById('fecha_fin');
                
                if (fechaInicio.value && fechaFin.value) {
                    if (new Date(fechaInicio.value) >= new Date(fechaFin.value)) {
                        fechaFin.classList.add('field-validation');
                        isValid = false;
                    }
                }
            }

            return isValid;
        }

        function setupFormValidation() {
            const inputs = document.querySelectorAll('.form-input, .form-select, .form-textarea');
            inputs.forEach(input => {
                input.addEventListener('blur', function() {
                    this.classList.remove('field-validation', 'field-valid');
                    if (this.hasAttribute('required') && this.value.trim()) {
                        this.classList.add('field-valid');
                    }
                });
            });
        }

        // Configurar cambio de provincia/distrito
        function setupProvinceDistrictChange() {
            const provinciaSelect = document.getElementById('provincia');
            const distritoSelect = document.getElementById('distrito');
            
            provinciaSelect.addEventListener('change', function() {
                const provinciaId = parseInt(this.value);
                distritoSelect.innerHTML = '<option value="">Selecciona un distrito</option>';
                
                if (provinciaId && distritosPorProvincia[provinciaId]) {
                    distritosPorProvincia[provinciaId].forEach((distrito, index) => {
                        const option = document.createElement('option');
                        option.value = index + 1;
                        option.textContent = distrito;
                        distritoSelect.appendChild(option);
                    });
                }
            });
        }

        // Configurar subida de im치genes
        function setupImageUpload() {
            const uploadContainer = document.getElementById('imageUploadContainer');
            const fileInput = document.getElementById('imagen');
            const previewContainer = document.getElementById('imagePreviewContainer');
            const preview = document.getElementById('imagePreview');
            const imageInfo = document.getElementById('imageInfo');

            // Click para seleccionar archivo
            uploadContainer.addEventListener('click', () => {
                fileInput.click();
            });

            // Drag and drop
            uploadContainer.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadContainer.classList.add('dragover');
            });

            uploadContainer.addEventListener('dragleave', () => {
                uploadContainer.classList.remove('dragover');
            });

            uploadContainer.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadContainer.classList.remove('dragover');
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleImageUpload(files[0]);
                }
            });

            // Cambio de archivo
            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    handleImageUpload(e.target.files[0]);
                }
            });

            function handleImageUpload(file) {
                if (file && file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        preview.src = e.target.result;
                        imageInfo.textContent = file.name;
                        uploadContainer.style.display = 'none';
                        previewContainer.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                }
            }
        }

        function removeImage() {
            document.getElementById('imagen').value = '';
            document.getElementById('imageUploadContainer').style.display = 'flex';
            document.getElementById('imagePreviewContainer').style.display = 'none';
        }

        // Actualizar resumen
        function updateSummary() {
            if (currentStep === 6) {
                const nombre = document.getElementById('nombre').value;
                const precio = document.getElementById('precio').value;
                const personas = document.getElementById('personas').value;
                const fechaInicio = document.getElementById('fecha_inicio').value;
                const fechaFin = document.getElementById('fecha_fin').value;
                const descripcion = document.getElementById('descripcion').value;
                const provincia = document.getElementById('provincia').selectedOptions[0]?.text;
                const distrito = document.getElementById('distrito').selectedOptions[0]?.text;

                document.getElementById('summaryNombre').textContent = nombre || '-';
                document.getElementById('summaryPrecio').textContent = precio ? `${precio} USD` : '-';
                document.getElementById('summaryPersonas').textContent = personas || '-';
                document.getElementById('summaryFechas').textContent = fechaInicio && fechaFin ? `${fechaInicio} - ${fechaFin}` : '-';
                document.getElementById('summaryDescripcion').textContent = descripcion ? descripcion.substring(0, 100) + '...' : '-';
                document.getElementById('summaryProvincia').textContent = provincia || '-';
                document.getElementById('summaryDistrito').textContent = distrito || '-';
            }
        }

        // Enviar formulario
        function submitForm() {
            if (validateCurrentStep()) {
                const formData = new FormData(document.getElementById('tourPlanForm'));
                
                // Simular env칤o (aqu칤 deber칤as hacer la petici칩n real a tu servidor)
                console.log('Datos del formulario:', Object.fromEntries(formData));
                
                // Mostrar mensaje de 칠xito
                alert('춰Plan tur칤stico creado exitosamente!');
                
                // Opcional: resetear formulario
                // document.getElementById('tourPlanForm').reset();
                // currentStep = 1;
                // showStep(1);
                // updateProgressBar();
                // updateNavigationButtons();
            }
        }

        // Permitir navegaci칩n directa haciendo click en los pasos
        document.querySelectorAll('.step').forEach(step => {
            step.addEventListener('click', function() {
                const targetStep = parseInt(this.getAttribute('data-step'));
                if (targetStep < currentStep || (targetStep === currentStep + 1 && validateCurrentStep())) {
                    currentStep = targetStep;
                    showStep(currentStep);
                    updateProgressBar();
                    updateNavigationButtons();
                    updateSummary();
                }
            });
        });
    </script>
</body>
</html>
   